<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Embedded System Design 2 - Project: EFM32HG-Embedded2-project/src/main.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Embedded System Design 2 - Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('main_8c_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">main.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="main_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***************************************************************************/</span><span class="comment">/**</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * @file main.c</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * @brief The main file for Project 2 from Embedded System Design 2 - Lab.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * @version 3.2</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * @author Brecht Van Eeckhoudt</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * ******************************************************************************</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * @section Versions</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *   Please check https://github.com/Fescron/Project-LabEmbeddedDesign2/tree/master/software to find the latest version!</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *   @li v1.0: Started from https://github.com/Fescron/Project-LabEmbeddedDesign1</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *             and added code for the DS18B20 temperature sensor and the selfmade</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *             link breakage sensor. Reformatted some of these imported methods.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *   @li v1.1: Removed unused files, add cable-checking method.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *   @li v1.2: Moved initRTCcomp method to &quot;util.c&quot;.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *   @li v1.3: Stopped using deprecated function &quot;GPIO_IntConfig&quot;.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *   @li v1.4: Started using get/set method for the static variable &quot;ADXL_triggered&quot;.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *   @li v1.5: Reworked the code a lot (stopped disabling cmuClock_GPIO, ...).</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *   @li v1.6: Moved all documentation above source files to this file.</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *   @li v1.7: Updated documentation, started using a state-machine.</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *   @li v1.8: Moved checkCable method to &quot;other.c&quot; and started using readVBAT method.</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *   @li v1.9: Cleaned up documentation and TODO&#39;s.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *   @li v2.0: Updated code with new DEFINE checks.</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> *   @li v2.1: Updated code with new ADC functionality.</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> *   @li v2.2: Started using working temperature sensor code.</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> *   @li v2.3: Started using working cable checking code and added &quot;SEND&quot; `mcu_state`.</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> *   @li v2.4: Started using a struct to keep the measurements in, added line to disable the RN2483.</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> *   @li v2.5: Started using custom enum types for the accelerometer settings.</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *   @li v2.6: Added ADXL testing functionality.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> *   @li v2.7: Removed USTIMER logic from this file.</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> *   @li v2.8: Added functionality to detect a *storm*.</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> *   @li v2.9: Started adding LoRaWAN functionality, added more wake-up/sleep functionality.</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> *   @li v3.0: Started using updated LoRaWAN send methods.</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> *   @li v3.1: Added functionality to enable/disable the LED blinking when measuring/sending data.</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> *   @li v3.2: Fixed button wakeup when sleeping for WAKE_UP_PERIOD_S/2.</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> * ******************************************************************************</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> * @todo</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> *   IMPORTANT:</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> *     - On INT1-PD7, go to sleep for somehow the remaining RTC time on wakeup?</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> *         - On ADXL interrupt the RTC doesn&#39;t get disabled!</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> * @todo</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> *   EXTRA THINGS:</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> *     - Add WDOG functionality (see &quot;powertest&quot; example and *Embedded Muse 365*)</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"> *         - Due to *short* interval: Only when awake?</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"> *         - Also see `getResetCause`(`system.c` in Dramco example)</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"> *         - Check all `while` loops (wait for register flags, ...)! (for loops don&#39;t pose problems)</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"> *         - Add `counter` timeout to exit `while` loops in worst case (`timer` timout functionality disabled...)</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"> *     - Give the sensors time to power up (40 ms? - Dramco)</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"> *         - ADXL &amp; old temperature sensor</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"> *     - Test negative temperatures by putting the module in it&#39;s case in the freezer...</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"> *         - LPP logic should be able to handle negative values (`int16_t` as input type for methods &amp; analog: 0.01 signed, temp: 0.1 °C signed MSB)</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> * @todo</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"> *   OPTIMALISATIONS:</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"> *     - Change &quot;mode&quot; to release (also see Reference Manual @ 6.3.2 Debug and EM2/EM3).</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"> *         - Also see *AN0007: 2.8 Optimizing Code*</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> *     - Change LoRaWAN Spreading Factor</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> *     - Add `disableClocks` (see `emodes.c` example) and `disableUnusedPins` functionality.</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> *         - EM3: All unwanted oscillators are disabled, don&#39;t need to manually disable them before `EMU_EnterEM3`.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> *     - Set the accelerometer in *movement detection* to spare battery life when the buoy isn&#39;t installed yet?</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> *         - EM4 wakeup? See `deepsleep` (`system.c` in Dramco example)</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> * ******************************************************************************</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"> * @section License</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> *   Some methods use code obtained from examples from [Silicon Labs&#39; GitHub](https://github.com/SiliconLabs/peripheral_examples).</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"> *   These sections are licensed under the Silabs License Agreement. See the file</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"> *   &quot;Silabs_License_Agreement.txt&quot; for details. Before using this software for</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"> *   any purpose, you must agree to the terms of that agreement.</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"> * ******************************************************************************</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> * @attention</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> *   See the file `documentation.h` for a lot of useful documentation about this project!</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"> * ******************************************************************************</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"> * @section Errors</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"> *   If in this project something unexpected occurs, an `error` method gets called.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"> *   What happens in this method can be selected in `util.h` with the definition</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"> *   `ERROR_FORWARDING`. If it&#39;s value is `0` the MCU displays (if `dbprint` is enabled)</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"> *   a UART message and gets put in a `while(true)` to flash the LED. If it&#39;s value is</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"> *   `1` then certain values (all values except 30 - 55 since these are errors in the</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> *   LoRaWAN functionality itself) get forwarded to the cloud using LoRaWAN functionality</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> *   and the MCU resumes it&#39;s code.</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> *   When calling an `error` method, the following things were kept in mind:</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> *     - **Values 0 - 9:** Reserved for reset and other critical functionality.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> *     - **Values 10 - ... :** Available to use for anything else.</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> *   Below is a list of values which correspond to certain functionality:</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"> *     - **10:** Problem in the case of the state machine (`main.c`)</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"> *     - **11 - 13:** `adc.c`</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"> *     - **14 - 17:** `delay.c`</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"> *     - **18 - 19:** `interrupt.c`</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"> *     - **20 - 27:** `ADXL362.c`</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"> *     - **28:** `DS18B20.c`</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> *     - **30 - 50:** `lora_wrappers.c`</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"> *     - **51 - 55:** `leuart.c`</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"> ******************************************************************************/</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span>        <span class="comment">/* (u)intXX_t */</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#include &lt;stdbool.h&gt;</span>       <span class="comment">/* &quot;bool&quot;, &quot;true&quot;, &quot;false&quot; */</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#include &quot;em_device.h&quot;</span>     <span class="comment">/* Include necessary MCU-specific header file */</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">#include &quot;em_chip.h&quot;</span>       <span class="comment">/* Chip Initialization */</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#include &quot;em_cmu.h&quot;</span>        <span class="comment">/* Clock management unit */</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#include &quot;em_gpio.h&quot;</span>       <span class="comment">/* General Purpose IO */</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#include &quot;em_rtc.h&quot;</span>        <span class="comment">/* Real Time Counter (RTC) */</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pin__mapping_8h.html">pin_mapping.h</a>&quot;</span>   <span class="comment">/* PORT and PIN definitions */</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="debugging_8h.html">debugging.h</a>&quot;</span>     <span class="comment">/* Enable or disable printing to UART for debugging */</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="delay_8h.html">delay.h</a>&quot;</span>         <span class="comment">/* Delay functionality */</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="util_8h.html">util.h</a>&quot;</span>          <span class="comment">/* Utility functionality */</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="interrupt_8h.html">interrupt.h</a>&quot;</span>     <span class="comment">/* GPIO wake-up initialization and interrupt handlers */</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ADXL362_8h.html">ADXL362.h</a>&quot;</span>       <span class="comment">/* Functions related to the accelerometer */</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DS18B20_8h.html">DS18B20.h</a>&quot;</span>       <span class="comment">/* Functions related to the temperature sensor */</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="adc_8h.html">adc.h</a>&quot;</span>           <span class="comment">/* Internal voltage and temperature reading functionality */</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cable_8h.html">cable.h</a>&quot;</span>         <span class="comment">/* Cable checking functionality */</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lora__wrappers_8h.html">lora_wrappers.h</a>&quot;</span> <span class="comment">/* LoRaWAN functionality */</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="datatypes_8h.html">datatypes.h</a>&quot;</span>     <span class="comment">/* Definitions of the custom data-types */</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">/* Local definitions */</span><span class="comment"></span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">/** Time between each wake-up in seconds</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"> *    @li max 500 seconds when using LFXO delay</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"> *    @li 3600 seconds (one hour) works fine when using ULFRCO delay */</span></div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="main_8c.html#ae1c1201a004beb35d405fd396f53f86c">  136</a></span>&#160;<span class="preprocessor">#define WAKE_UP_PERIOD_S 10</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">/** Amount of PIN interrupt wakeups (before a RTC wakeup) to be considered as a *storm* */</span></div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="main_8c.html#a0f0eb9c2fcd0551bc741bb80081a6e2e">  139</a></span>&#160;<span class="preprocessor">#define STORM_INTERRUPTS 5</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">/** Public definition to select if the LED is turned on while measuring or sending data</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"> *    @li `1` - Enable the LED when while measuring or sending data.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"> *    @li `0` - Don&#39;t enable the LED while measuring or sending data. */</span></div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="main_8c.html#a2ee109ad948cb91914bc161a8fabdb3f">  144</a></span>&#160;<span class="preprocessor">#define LED_ENABLED 1</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">/* Local variables */</span><span class="comment"></span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">/** Keep the state of the state machine */</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">  149</a></span>&#160;<span class="keyword">static</span> <a class="code" href="datatypes_8h.html#aaaac3cd1355a2985b6f312f60d5919ab">MCU_State_t</a> <a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">/** Keep the measurement data */</span></div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="main_8c.html#ad2c9072e6e6a5758dfc647e1a08a9509">  152</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structMeasurementData__t.html">MeasurementData_t</a> <a class="code" href="main_8c.html#ad2c9072e6e6a5758dfc647e1a08a9509">data</a>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">/**************************************************************************/</span><span class="comment">/**</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"> * @brief</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"> *   Method to check if any interrupts are triggered by buttons.</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"> * @return</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"> *   @li `true` - A button interrupt was triggered.</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"> *   @li `false` - No button interrupt was triggered.</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"> *****************************************************************************/</span></div><div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="main_8c.html#a5f9359bd2c769dbc39709d37da27421d">  163</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="main_8c.html#a5f9359bd2c769dbc39709d37da27421d">checkBTNinterrupts</a> (<span class="keywordtype">void</span>)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;{</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">bool</span> value = <span class="keyword">false</span>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="interrupt_8h.html#ab21b930d7d49ab29917b54408373414a">BTN_getTriggered</a>(0))</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">#if DEBUGGING == 1 </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        dbprintln_color(<span class="stringliteral">&quot;PB0 pushed!&quot;</span>, 4);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        value = <span class="keyword">true</span>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <a class="code" href="interrupt_8h.html#abb85f76e16c270396851fad940339a4b">BTN_setTriggered</a>(0, <span class="keyword">false</span>); <span class="comment">/* Clear static variable */</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="interrupt_8h.html#ab21b930d7d49ab29917b54408373414a">BTN_getTriggered</a>(1))</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#if DEBUGGING == 1 </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        dbprintln_color(<span class="stringliteral">&quot;PB1 pushed!&quot;</span>, 4);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        value = <span class="keyword">true</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="interrupt_8h.html#abb85f76e16c270396851fad940339a4b">BTN_setTriggered</a>(1, <span class="keyword">false</span>); <span class="comment">/* Clear static variable */</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">return</span> (value);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">/**************************************************************************/</span><span class="comment">/**</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"> * @brief</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"> *   Main function.</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"> *****************************************************************************/</span></div><div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">  200</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (<span class="keywordtype">void</span>)</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">/* Keep the amount of times a message has been send to indicate the cable is broken */</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    uint8_t cableBrokenSendTimes = 0;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">/* Keep a value if a storm has been detected */</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">bool</span> stormDetected = <span class="keyword">false</span>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">/* Keep a value to send one test LoRaWAN message */</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">bool</span> tested = <span class="keyword">true</span>; <span class="comment">// TODO: remove later (true: disable sending the message on first boot)</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">/* Set the index to put the measurements in */</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a> = 0;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">while</span> (1)</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a>)</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a0cb1b2c6a7db1f1084886c98909a3f36">INIT</a>:</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                CHIP_Init(); <span class="comment">/* Initialize chip */</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="preprocessor">#if DEBUGGING == 1 </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">#if CUSTOM_BOARD == 1 </span><span class="comment">/* Custom Happy Gecko pinout */</span><span class="preprocessor"></span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                dbprint_INIT(<a class="code" href="pin__mapping_8h.html#a4262e551c4909be86ca4e2c37e3085c5">DBG_UART</a>, <a class="code" href="pin__mapping_8h.html#a123ccd79d2ee0a5cd12968e0805e9ce3">DBG_UART_LOC</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                dbwarn(<span class="stringliteral">&quot;CUSTOM board pinout selected&quot;</span>);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* Regular Happy Gecko pinout */</span><span class="preprocessor"></span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                dbprint_INIT(USART1, 4, <span class="keyword">true</span>, <span class="keyword">false</span>); <span class="comment">/* VCOM */</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                dbwarn(<span class="stringliteral">&quot;REGULAR board pinout selected&quot;</span>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <span class="comment">//dbprint_INIT(USART1, 0, false, false); /* US1_TX = PC0 */</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* Board pinout selection */</span><span class="preprocessor"></span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <a class="code" href="util_8h.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a>(<span class="keyword">true</span>); <span class="comment">/* Enable (and initialize) LED */</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <a class="code" href="interrupt_8h.html#a7e35708d61d26e9fe559a5545cdad810">initGPIOwakeup</a>(); <span class="comment">/* Initialize GPIO wake-up */</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <a class="code" href="adc_8h.html#ab8a50016236d402e27a7e1b7f0f4cf52">initADC</a>(<a class="code" href="adc_8h.html#a8d24200decb8cc61e4c749c435e80926a33dfae05581973af118a10481e139aba">BATTERY_VOLTAGE</a>); <span class="comment">/* Initialize ADC to read battery voltage */</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <span class="comment">/* Initialize pin and disable RN2483 */</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                GPIO_PinModeSet(<a class="code" href="pin__mapping_8h.html#afa86994dcd9da11c714337b4f201d100">PM_RN2483_PORT</a>, <a class="code" href="pin__mapping_8h.html#a72c2ec1ff29c64c102892ecd0a9d1087">PM_RN2483_PIN</a>, gpioModePushPull, 0);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="comment">//GPIO_PinModeSet(RN2483_RESET_PORT, RN2483_RESET_PIN, gpioModePushPull, 0);</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                <span class="comment">//GPIO_PinModeSet(RN2483_RX_PORT, RN2483_RX_PIN, gpioModePushPull, 0);</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                <span class="comment">//GPIO_PinModeSet(RN2483_TX_PORT, RN2483_TX_PIN, gpioModePushPull, 0);</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <span class="comment">/* Initialize pin and disable external sensor power on DRAMCO shield */</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                GPIO_PinModeSet(<a class="code" href="pin__mapping_8h.html#a0223987bdf0e26bd8b25781db5f371d2">PM_SENS_EXT_PORT</a>, <a class="code" href="pin__mapping_8h.html#a73a4329f7f36b5b0cb41a39300e35b7f">PM_SENS_EXT_PIN</a>, gpioModePushPull, 0); <span class="comment">// TODO: check power usage effect?</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <span class="comment">//initLoRaWAN(); /* Initialize LoRaWAN functionality */</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <span class="comment">//sleepLoRaWAN(WAKE_UP_PERIOD_S); /* Put the LoRaWAN module to sleep */</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                <span class="comment">/* Initialize accelerometer */</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordflow">if</span> (<span class="keyword">true</span>)</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                    <a class="code" href="ADXL362_8h.html#a751aabb29c6d1d22a54443e94873dbe5">initADXL</a>(); <span class="comment">/* Initialize the accelerometer */</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                    <span class="comment">/* Go through all of the accelerometer ODR settings to see the influence they have on power usage. */</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                    <span class="keywordflow">if</span> (<span class="keyword">false</span>)</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                    {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                        <a class="code" href="util_8h.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                        <a class="code" href="ADXL362_8h.html#a50a7f7f1ee9b1ae3a1a60c4f2c9e4649">testADXL</a>();</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                        <a class="code" href="util_8h.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                    }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                    <a class="code" href="ADXL362_8h.html#aff08c54a3f0c4ad752a9f85e761762f5">ADXL_configRange</a>(<a class="code" href="ADXL362_8h.html#a5fb1203de521040cf84015c2d0bc4ac8aa5eefb16dc53ffa7754658b1f9ecce07">ADXL_RANGE_8G</a>); <span class="comment">/* Set the measurement range */</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                    <a class="code" href="ADXL362_8h.html#a5471fd7a8d4fd02ecdcafd54b9132e73">ADXL_configODR</a>(<a class="code" href="ADXL362_8h.html#a1f41212fbb669b45200d0d72d6bea1aca01748c0a0ebbcd2b912b062b25a6a374">ADXL_ODR_12_5</a>); <span class="comment">/* Configure ODR */</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                    <span class="comment">//ADXL_readValues(); /* Read and display values forever */</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                    <a class="code" href="ADXL362_8h.html#a94fe350d1a382c347c5aec424d573af8">ADXL_configActivity</a>(6); <span class="comment">/* Configure activity detection on INT1 [g] */</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                    <a class="code" href="ADXL362_8h.html#a3a32a4cf4d2f84835d7bd4a640fa66d6">ADXL_enableMeasure</a>(<span class="keyword">true</span>); <span class="comment">/* Enable measurements */</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                    <a class="code" href="delay_8h.html#adb46f4276f5ddf111153701858f85df6">delay</a>(300);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                    <a class="code" href="ADXL362_8h.html#a40573570150c448c0504097f13b96cea">ADXL_ackInterrupt</a>(); <span class="comment">/* ADXL gives interrupt, capture this and acknowledge it by reading from it&#39;s status register */</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                    <a class="code" href="ADXL362_8h.html#a76886733862257ff800cd5924e0c3e76">ADXL_enableSPI</a>(<span class="keyword">false</span>); <span class="comment">/* Disable SPI after the initializations */</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                    <a class="code" href="ADXL362_8h.html#a082ac236e02b38591a21e89de3609dc5">ADXL_clearCounter</a>(); <span class="comment">/* Clear the trigger counter */</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                <span class="comment">//GPIO_PinModeSet(gpioPortC, 0, gpioModePushPull, 0); /* Debug pin */</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                <span class="comment">//GPIO_PinOutSet(gpioPortC, 0); /* Debug pin */</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                <span class="comment">//GPIO_PinOutClear(gpioPortC, 0); /* Debug pin */</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="preprocessor">#if DEBUGGING == 1 </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                dbprintln(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <a class="code" href="util_8h.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a>(<span class="keyword">false</span>); <span class="comment">/* Disable LED */</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a> = <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a10b4381a926db55ed18619513fb12a28">MEASURE</a>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a10b4381a926db55ed18619513fb12a28">MEASURE</a>:</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="preprocessor">#if LED_ENABLED == 1 </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <a class="code" href="util_8h.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a>(<span class="keyword">true</span>); <span class="comment">/* Enable LED */</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <span class="comment">/* Measure and store the external temperature (a measurement takes about 23 ms if successful, about 60 ms if no sensor is attached)*/</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                data.<a class="code" href="structMeasurementData__t.html#a1d38052acf06a960cebc9c2cf6e4dbd9">extTemp</a>[data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a>] = <a class="code" href="DS18B20_8h.html#ac3219638734d78805b64daa2cad58867">readTempDS18B20</a>();</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="comment">/* Measure and store the battery voltage */</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                data.<a class="code" href="structMeasurementData__t.html#a05ea65bcd1951501f9437451440174bd">voltage</a>[data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a>] = <a class="code" href="adc_8h.html#ac6cece90b77d0ba6c1afaf17f57bb790">readADC</a>(<a class="code" href="adc_8h.html#a8d24200decb8cc61e4c749c435e80926a33dfae05581973af118a10481e139aba">BATTERY_VOLTAGE</a>);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <span class="comment">/* Measure and store the internal temperature */</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                data.<a class="code" href="structMeasurementData__t.html#a7e7bde46d4fa386d385db9b6322c14a9">intTemp</a>[data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a>] = <a class="code" href="adc_8h.html#ac6cece90b77d0ba6c1afaf17f57bb790">readADC</a>(<a class="code" href="adc_8h.html#a8d24200decb8cc61e4c749c435e80926a536d05df6092745fa011adfed26e6312">INTERNAL_TEMPERATURE</a>);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="preprocessor">#if DEBUGGING == 1 </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                dbinfoInt(<span class="stringliteral">&quot;Measurement &quot;</span>, data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a> + 1, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                dbinfoInt(<span class="stringliteral">&quot;Temperature: &quot;</span>, data.<a class="code" href="structMeasurementData__t.html#a1d38052acf06a960cebc9c2cf6e4dbd9">extTemp</a>[data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a>], <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                dbinfoInt(<span class="stringliteral">&quot;Battery voltage: &quot;</span>, data.<a class="code" href="structMeasurementData__t.html#a05ea65bcd1951501f9437451440174bd">voltage</a>[data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a>], <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                dbinfoInt(<span class="stringliteral">&quot;Internal temperature: &quot;</span>, data.<a class="code" href="structMeasurementData__t.html#a7e7bde46d4fa386d385db9b6322c14a9">intTemp</a>[data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a>], <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                <span class="comment">/* Check if the cable is broken */</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="cable_8h.html#af3994387a62811a825f973e1a09a533a">checkCable</a>())</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                    <span class="comment">/* Only send a message 4 times */</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                    <span class="keywordflow">if</span> (cableBrokenSendTimes &lt; 4)</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="preprocessor">#if DEBUGGING == 1 </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                        dbcrit(<span class="stringliteral">&quot;Cable broken! Sending the data ...&quot;</span>);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                        <a class="code" href="lora__wrappers_8h.html#a66be1f59b1529ebee2fb41b252c05a52">initLoRaWAN</a>(); <span class="comment">/* Initialize LoRaWAN functionality */</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                        <a class="code" href="lora__wrappers_8h.html#ad081e2fea9e62cd0e6db6789ceb2ae1e">sendCableBroken</a>(<span class="keyword">true</span>); <span class="comment">/* Send the LoRaWAN message TODO: also send measurement data here? */</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                        <a class="code" href="lora__wrappers_8h.html#aa124f250dab5120ab1199f7592e06ae4">disableLoRaWAN</a>(); <span class="comment">/* Disable RN2483 */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                        cableBrokenSendTimes++; <span class="comment">/* Increment the counter */</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                    }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                    {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="preprocessor">#if DEBUGGING == 1 </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                        dbcrit(<span class="stringliteral">&quot;Cable broken but no longer sending the data&quot;</span>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                    }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="preprocessor">#if DEBUGGING == 1 </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                    dbinfo(<span class="stringliteral">&quot;Cable still intact&quot;</span>);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a>++; <span class="comment">/* Increase the index to put the next measurements in */</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <span class="keywordflow">if</span> (!tested)</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="preprocessor">#if DEBUGGING == 1 </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    dbwarn(<span class="stringliteral">&quot;Sending test LPP data once ...&quot;</span>);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                    <a class="code" href="lora__wrappers_8h.html#a66be1f59b1529ebee2fb41b252c05a52">initLoRaWAN</a>(); <span class="comment">/* Initialize LoRaWAN functionality */</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                    <a class="code" href="lora__wrappers_8h.html#aa76d53437f8d435aecff9f085ce22155">sendTest</a>(data); <span class="comment">/* Send the LoRaWAN test message */</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                    <a class="code" href="lora__wrappers_8h.html#aa124f250dab5120ab1199f7592e06ae4">disableLoRaWAN</a>(); <span class="comment">/* Disable RN2483 */</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                    tested = <span class="keyword">true</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor">#if LED_ENABLED == 1 </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                <a class="code" href="util_8h.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a>(<span class="keyword">false</span>); <span class="comment">/* Disable LED */</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <span class="comment">/* Decide if 6 measurements are taken or not and react accordingly */</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                <span class="keywordflow">if</span> (data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a> == 6) <a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a> = <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a67be7a5f47004345047b32fff72a2230">SEND</a>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                <span class="keywordflow">else</span> <a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a> = <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4ad6137abebe4fdc59e2f0f2c84bdbe3fa">SLEEP</a>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a67be7a5f47004345047b32fff72a2230">SEND</a>:</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor">#if LED_ENABLED == 1 </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                <a class="code" href="util_8h.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a>(<span class="keyword">true</span>); <span class="comment">/* Enable LED */</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="preprocessor">#if DEBUGGING == 1 </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                dbwarnInt(<span class="stringliteral">&quot;Sending &quot;</span>, data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a>, <span class="stringliteral">&quot; measurements ...&quot;</span>);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                <span class="comment">//wakeLoRaWAN(); /* Wake up the LoRaWAN module */</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                <a class="code" href="lora__wrappers_8h.html#a66be1f59b1529ebee2fb41b252c05a52">initLoRaWAN</a>(); <span class="comment">/* Initialize LoRaWAN functionality */</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                <a class="code" href="lora__wrappers_8h.html#a0dd2587b8cfad6058cc4a8cef957b324">sendMeasurements</a>(data); <span class="comment">/* Send the measurements */</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                <a class="code" href="lora__wrappers_8h.html#aa124f250dab5120ab1199f7592e06ae4">disableLoRaWAN</a>(); <span class="comment">/* Disable RN2483 */</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <span class="comment">//sleepLoRaWAN(WAKE_UP_PERIOD_S); /* Put the LoRaWAN module back to sleep */</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a> = 0; <span class="comment">/* Reset the index to put the measurements in */</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="preprocessor">#if LED_ENABLED == 1 </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                <a class="code" href="util_8h.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a>(<span class="keyword">false</span>); <span class="comment">/* Disable LED */</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                <a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a> = <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4ad6137abebe4fdc59e2f0f2c84bdbe3fa">SLEEP</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4ae05e5e5d4033fcc1f6cc3894881d66b3">SEND_STORM</a>:</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor">#if LED_ENABLED == 1 </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                <a class="code" href="util_8h.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a>(<span class="keyword">true</span>); <span class="comment">/* Enable LED */</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="preprocessor">#if DEBUGGING == 1 </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                dbwarnInt(<span class="stringliteral">&quot;STORM DETECTED! Sending &quot;</span>, data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a>, <span class="stringliteral">&quot; measurement(s) ...&quot;</span>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                <span class="comment">//wakeLoRaWAN(); /* Wake up the LoRaWAN module */</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <a class="code" href="lora__wrappers_8h.html#a66be1f59b1529ebee2fb41b252c05a52">initLoRaWAN</a>(); <span class="comment">/* Initialize LoRaWAN functionality */</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <span class="comment">// TODO: reset this value again?</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                <a class="code" href="lora__wrappers_8h.html#a5c46043c55ca0122df5edc3be05be34a">sendStormDetected</a>(<span class="keyword">true</span>); <span class="comment">/* Send a message to indicate that a storm has been detected */</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                <a class="code" href="lora__wrappers_8h.html#a0dd2587b8cfad6058cc4a8cef957b324">sendMeasurements</a>(data); <span class="comment">/* Send the measurements */</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                <a class="code" href="lora__wrappers_8h.html#aa124f250dab5120ab1199f7592e06ae4">disableLoRaWAN</a>(); <span class="comment">/* Disable RN2483 */</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                <span class="comment">//sleepLoRaWAN(WAKE_UP_PERIOD_S); /* Put the LoRaWAN module back to sleep */</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                data.<a class="code" href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">index</a> = 0; <span class="comment">/* Reset the index to put the measurements in */</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                stormDetected = <span class="keyword">true</span>; <span class="comment">/* Indicate that a storm has been detected */</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="preprocessor">#if LED_ENABLED == 1 </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                <a class="code" href="util_8h.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a>(<span class="keyword">false</span>); <span class="comment">/* Disable LED */</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                <a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a> = <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4aa40e10b1b38eea53354adb9aba78506c">SLEEP_HALFTIME</a>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4ad6137abebe4fdc59e2f0f2c84bdbe3fa">SLEEP</a>:</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                <span class="comment">// TODO These statements don&#39;t seem to have any effect on current consumption ...</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                <span class="comment">//GPIO_PinModeSet(DBG_RXD_PORT, DBG_RXD_PIN, gpioModeDisabled, 0); /* Disable RXD pin (has 10k pullup resistor) */</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                <a class="code" href="delay_8h.html#aae86f940455b5957441f4331cdc0828d">sleep</a>(<a class="code" href="main_8c.html#ae1c1201a004beb35d405fd396f53f86c">WAKE_UP_PERIOD_S</a>); <span class="comment">/* Go to sleep for xx seconds */</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                <span class="comment">//GPIO_PinModeSet(DBG_RXD_PORT, DBG_RXD_PIN, gpioModeInput, 0); /* Enable RXD pin */</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                <a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a> = <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a9204d962c01740d01d1ea40b219a0472">WAKEUP</a>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4aa40e10b1b38eea53354adb9aba78506c">SLEEP_HALFTIME</a>:</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                <a class="code" href="delay_8h.html#aae86f940455b5957441f4331cdc0828d">sleep</a>(<a class="code" href="main_8c.html#ae1c1201a004beb35d405fd396f53f86c">WAKE_UP_PERIOD_S</a>/2); <span class="comment">/* Go to sleep for xx seconds */</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                <a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a> = <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a9204d962c01740d01d1ea40b219a0472">WAKEUP</a>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a9204d962c01740d01d1ea40b219a0472">WAKEUP</a>:</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="preprocessor">#if LED_ENABLED == 1 </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                <a class="code" href="util_8h.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a>(<span class="keyword">true</span>); <span class="comment">/* Enable LED */</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                <span class="comment">/* Check if we woke up using buttons */</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="main_8c.html#a5f9359bd2c769dbc39709d37da27421d">checkBTNinterrupts</a>())</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                    <a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a> = <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a10b4381a926db55ed18619513fb12a28">MEASURE</a>; <span class="comment">/* Take measurements on &quot;case WAKEUP&quot; exit */</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                    <span class="comment">/* Check if we woke up using the RTC sleep functionality and act accordingly */</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="delay_8h.html#a7bfbeaf084abaa0fc6baf77a1640b598">RTC_checkWakeup</a>())</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                    {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                        <a class="code" href="delay_8h.html#a072ccec54e047acce2566984c28b0232">RTC_clearWakeup</a>(); <span class="comment">/* Clear static variable */</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                        <a class="code" href="ADXL362_8h.html#a082ac236e02b38591a21e89de3609dc5">ADXL_clearCounter</a>(); <span class="comment">/* Clear the trigger counter because we woke up &quot;normally&quot; */</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                        <a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a> = <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a10b4381a926db55ed18619513fb12a28">MEASURE</a>; <span class="comment">/* Take measurements on &quot;case WAKEUP&quot; exit */</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                    }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    <span class="comment">/* Check if we woke up using the accelerometer */</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="ADXL362_8h.html#a0a502d06bb2873e643ce69873622ed04">ADXL_getTriggered</a>())</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                    {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                        <span class="comment">/* Check if we detected a storm */</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="ADXL362_8h.html#aa74db830447eeb4e0a95091e585c36e4">ADXL_getCounter</a>() &gt; <a class="code" href="main_8c.html#a0f0eb9c2fcd0551bc741bb80081a6e2e">STORM_INTERRUPTS</a>)</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                        {</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                            RTC_Enable(<span class="keyword">false</span>); <span class="comment">/* Disable the counter */</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                            <a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a> = <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4ae05e5e5d4033fcc1f6cc3894881d66b3">SEND_STORM</a>; <span class="comment">/* Storm detected, send a message on &quot;case WAKEUP&quot; exit */</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                        }</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                        <span class="keywordflow">else</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                        {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="preprocessor">#if DEBUGGING == 1 </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                            dbprintln_color(<span class="stringliteral">&quot;INT-PD7 triggered!&quot;</span>, 4);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUGGING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                            <a class="code" href="ADXL362_8h.html#a76886733862257ff800cd5924e0c3e76">ADXL_enableSPI</a>(<span class="keyword">true</span>);  <span class="comment">/* Enable SPI functionality */</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                            <a class="code" href="ADXL362_8h.html#a40573570150c448c0504097f13b96cea">ADXL_ackInterrupt</a>();   <span class="comment">/* Acknowledge ADXL interrupt by reading the status register */</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                            <a class="code" href="ADXL362_8h.html#a76886733862257ff800cd5924e0c3e76">ADXL_enableSPI</a>(<span class="keyword">false</span>); <span class="comment">/* Disable SPI functionality */</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                            <span class="comment">/* Check if a storm was detected before going to sleep for WAKE_UP_PERIOD_S/2 */</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                            <span class="keywordflow">if</span> (stormDetected)</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                            {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                                stormDetected = <span class="keyword">false</span>; <span class="comment">/* Reset variable */</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                                <a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a> = <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a10b4381a926db55ed18619513fb12a28">MEASURE</a>; <span class="comment">/* Take measurements on &quot;case WAKEUP&quot; exit */</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                            }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                            <span class="keywordflow">else</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                            {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                                <span class="comment">/* Go back to sleep, we only take measurements on RTC/button wakeup */</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                                <a class="code" href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a> = <a class="code" href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4ad6137abebe4fdc59e2f0f2c84bdbe3fa">SLEEP</a>; <span class="comment">/* TODO: go to sleep for somehow the remaining RTC time on wakeup? */</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                            }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                        }</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                    }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="preprocessor">#if LED_ENABLED == 1 </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                <a class="code" href="util_8h.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a>(<span class="keyword">false</span>); <span class="comment">/* Disable LED */</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* LED_ENABLED */</span><span class="preprocessor"></span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                <a class="code" href="util_8h.html#ab212081592c908bf57b591e3c6e7483d">error</a>(10);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            } <span class="keywordflow">break</span>;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        }</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;}</div><div class="ttc" id="main_8c_html_a5f9359bd2c769dbc39709d37da27421d"><div class="ttname"><a href="main_8c.html#a5f9359bd2c769dbc39709d37da27421d">checkBTNinterrupts</a></div><div class="ttdeci">bool checkBTNinterrupts(void)</div><div class="ttdoc">Method to check if any interrupts are triggered by buttons. </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00163">main.c:163</a></div></div>
<div class="ttc" id="datatypes_8h_html_a68d90e0eaaa236e9664bbfc691bbd4d4a67be7a5f47004345047b32fff72a2230"><div class="ttname"><a href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a67be7a5f47004345047b32fff72a2230">SEND</a></div><div class="ttdef"><b>Definition:</b> <a href="datatypes_8h_source.html#l00033">datatypes.h:33</a></div></div>
<div class="ttc" id="datatypes_8h_html_a68d90e0eaaa236e9664bbfc691bbd4d4ae05e5e5d4033fcc1f6cc3894881d66b3"><div class="ttname"><a href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4ae05e5e5d4033fcc1f6cc3894881d66b3">SEND_STORM</a></div><div class="ttdef"><b>Definition:</b> <a href="datatypes_8h_source.html#l00034">datatypes.h:34</a></div></div>
<div class="ttc" id="adc_8h_html_ab8a50016236d402e27a7e1b7f0f4cf52"><div class="ttname"><a href="adc_8h.html#ab8a50016236d402e27a7e1b7f0f4cf52">initADC</a></div><div class="ttdeci">void initADC(ADC_Measurement_t peripheral)</div><div class="ttdoc">Method to initialize the ADC to later check the battery voltage or internal temperature. </div><div class="ttdef"><b>Definition:</b> <a href="adc_8c_source.html#l00063">adc.c:63</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_a4262e551c4909be86ca4e2c37e3085c5"><div class="ttname"><a href="pin__mapping_8h.html#a4262e551c4909be86ca4e2c37e3085c5">DBG_UART</a></div><div class="ttdeci">#define DBG_UART</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00068">pin_mapping.h:68</a></div></div>
<div class="ttc" id="structMeasurementData__t_html_abb6211ec098e8d1817456a9758f083d1"><div class="ttname"><a href="structMeasurementData__t.html#abb6211ec098e8d1817456a9758f083d1">MeasurementData_t::index</a></div><div class="ttdeci">uint8_t index</div><div class="ttdef"><b>Definition:</b> <a href="datatypes_8h_source.html#l00044">datatypes.h:44</a></div></div>
<div class="ttc" id="debugging_8h_html"><div class="ttname"><a href="debugging_8h.html">debugging.h</a></div><div class="ttdoc">Enable or disable printing to UART. </div></div>
<div class="ttc" id="datatypes_8h_html_a68d90e0eaaa236e9664bbfc691bbd4d4aa40e10b1b38eea53354adb9aba78506c"><div class="ttname"><a href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4aa40e10b1b38eea53354adb9aba78506c">SLEEP_HALFTIME</a></div><div class="ttdef"><b>Definition:</b> <a href="datatypes_8h_source.html#l00036">datatypes.h:36</a></div></div>
<div class="ttc" id="ADXL362_8h_html"><div class="ttname"><a href="ADXL362_8h.html">ADXL362.h</a></div><div class="ttdoc">All code for the ADXL362 accelerometer. </div></div>
<div class="ttc" id="ADXL362_8h_html_a0a502d06bb2873e643ce69873622ed04"><div class="ttname"><a href="ADXL362_8h.html#a0a502d06bb2873e643ce69873622ed04">ADXL_getTriggered</a></div><div class="ttdeci">bool ADXL_getTriggered(void)</div><div class="ttdoc">Getter for the ADXL_triggered static variable. </div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8c_source.html#l00186">ADXL362.c:186</a></div></div>
<div class="ttc" id="datatypes_8h_html_a68d90e0eaaa236e9664bbfc691bbd4d4ad6137abebe4fdc59e2f0f2c84bdbe3fa"><div class="ttname"><a href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4ad6137abebe4fdc59e2f0f2c84bdbe3fa">SLEEP</a></div><div class="ttdef"><b>Definition:</b> <a href="datatypes_8h_source.html#l00035">datatypes.h:35</a></div></div>
<div class="ttc" id="datatypes_8h_html"><div class="ttname"><a href="datatypes_8h.html">datatypes.h</a></div><div class="ttdoc">Definitions of the custom data-types used. </div></div>
<div class="ttc" id="ADXL362_8h_html_a5471fd7a8d4fd02ecdcafd54b9132e73"><div class="ttname"><a href="ADXL362_8h.html#a5471fd7a8d4fd02ecdcafd54b9132e73">ADXL_configODR</a></div><div class="ttdeci">void ADXL_configODR(ADXL_ODR_t givenODR)</div><div class="ttdoc">Configure the Output Data Rate (ODR). </div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8c_source.html#l00372">ADXL362.c:372</a></div></div>
<div class="ttc" id="main_8c_html_ad2c9072e6e6a5758dfc647e1a08a9509"><div class="ttname"><a href="main_8c.html#ad2c9072e6e6a5758dfc647e1a08a9509">data</a></div><div class="ttdeci">static MeasurementData_t data</div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00152">main.c:152</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_a123ccd79d2ee0a5cd12968e0805e9ce3"><div class="ttname"><a href="pin__mapping_8h.html#a123ccd79d2ee0a5cd12968e0805e9ce3">DBG_UART_LOC</a></div><div class="ttdeci">#define DBG_UART_LOC</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00069">pin_mapping.h:69</a></div></div>
<div class="ttc" id="ADXL362_8h_html_a082ac236e02b38591a21e89de3609dc5"><div class="ttname"><a href="ADXL362_8h.html#a082ac236e02b38591a21e89de3609dc5">ADXL_clearCounter</a></div><div class="ttdeci">void ADXL_clearCounter(void)</div><div class="ttdoc">Method to set the ADXL_triggercounter static variable back to zero. </div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8c_source.html#l00158">ADXL362.c:158</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_a72c2ec1ff29c64c102892ecd0a9d1087"><div class="ttname"><a href="pin__mapping_8h.html#a72c2ec1ff29c64c102892ecd0a9d1087">PM_RN2483_PIN</a></div><div class="ttdeci">#define PM_RN2483_PIN</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00107">pin_mapping.h:107</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_a73a4329f7f36b5b0cb41a39300e35b7f"><div class="ttname"><a href="pin__mapping_8h.html#a73a4329f7f36b5b0cb41a39300e35b7f">PM_SENS_EXT_PIN</a></div><div class="ttdeci">#define PM_SENS_EXT_PIN</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00109">pin_mapping.h:109</a></div></div>
<div class="ttc" id="interrupt_8h_html_abb85f76e16c270396851fad940339a4b"><div class="ttname"><a href="interrupt_8h.html#abb85f76e16c270396851fad940339a4b">BTN_setTriggered</a></div><div class="ttdeci">void BTN_setTriggered(uint8_t number, bool value)</div><div class="ttdoc">Setter for the PB0_triggered and PB1_triggered static variable. </div><div class="ttdef"><b>Definition:</b> <a href="interrupt_8c_source.html#l00156">interrupt.c:156</a></div></div>
<div class="ttc" id="lora__wrappers_8h_html_a5c46043c55ca0122df5edc3be05be34a"><div class="ttname"><a href="lora__wrappers_8h.html#a5c46043c55ca0122df5edc3be05be34a">sendStormDetected</a></div><div class="ttdeci">void sendStormDetected(bool stormDetected)</div><div class="ttdoc">Send a packet to the cloud using LoRaWAN to indicate that a storm has been detected. </div><div class="ttdef"><b>Definition:</b> <a href="lora__wrappers_8c_source.html#l00150">lora_wrappers.c:150</a></div></div>
<div class="ttc" id="ADXL362_8h_html_aa74db830447eeb4e0a95091e585c36e4"><div class="ttname"><a href="ADXL362_8h.html#aa74db830447eeb4e0a95091e585c36e4">ADXL_getCounter</a></div><div class="ttdeci">uint16_t ADXL_getCounter(void)</div><div class="ttdoc">Getter for the ADXL_triggercounter static variable. </div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8c_source.html#l00148">ADXL362.c:148</a></div></div>
<div class="ttc" id="ADXL362_8h_html_a3a32a4cf4d2f84835d7bd4a640fa66d6"><div class="ttname"><a href="ADXL362_8h.html#a3a32a4cf4d2f84835d7bd4a640fa66d6">ADXL_enableMeasure</a></div><div class="ttdeci">void ADXL_enableMeasure(bool enabled)</div><div class="ttdoc">Enable or disable measurement mode. </div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8c_source.html#l00274">ADXL362.c:274</a></div></div>
<div class="ttc" id="datatypes_8h_html_a68d90e0eaaa236e9664bbfc691bbd4d4a10b4381a926db55ed18619513fb12a28"><div class="ttname"><a href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a10b4381a926db55ed18619513fb12a28">MEASURE</a></div><div class="ttdef"><b>Definition:</b> <a href="datatypes_8h_source.html#l00032">datatypes.h:32</a></div></div>
<div class="ttc" id="adc_8h_html"><div class="ttname"><a href="adc_8h.html">adc.h</a></div><div class="ttdoc">ADC functionality for reading the (battery) voltage and internal temperature. </div></div>
<div class="ttc" id="interrupt_8h_html_ab21b930d7d49ab29917b54408373414a"><div class="ttname"><a href="interrupt_8h.html#ab21b930d7d49ab29917b54408373414a">BTN_getTriggered</a></div><div class="ttdeci">bool BTN_getTriggered(uint8_t number)</div><div class="ttdoc">Getter for the PB0_triggered and PB1_triggered static variables. </div><div class="ttdef"><b>Definition:</b> <a href="interrupt_8c_source.html#l00127">interrupt.c:127</a></div></div>
<div class="ttc" id="ADXL362_8h_html_a50a7f7f1ee9b1ae3a1a60c4f2c9e4649"><div class="ttname"><a href="ADXL362_8h.html#a50a7f7f1ee9b1ae3a1a60c4f2c9e4649">testADXL</a></div><div class="ttdeci">void testADXL(void)</div><div class="ttdoc">This method goes through all of the ODR settings to see the influence they have on power usage...</div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8c_source.html#l00523">ADXL362.c:523</a></div></div>
<div class="ttc" id="ADXL362_8h_html_a751aabb29c6d1d22a54443e94873dbe5"><div class="ttname"><a href="ADXL362_8h.html#a751aabb29c6d1d22a54443e94873dbe5">initADXL</a></div><div class="ttdeci">void initADXL(void)</div><div class="ttdoc">Initialize the accelerometer. </div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8c_source.html#l00110">ADXL362.c:110</a></div></div>
<div class="ttc" id="structMeasurementData__t_html_a7e7bde46d4fa386d385db9b6322c14a9"><div class="ttname"><a href="structMeasurementData__t.html#a7e7bde46d4fa386d385db9b6322c14a9">MeasurementData_t::intTemp</a></div><div class="ttdeci">int32_t intTemp[6]</div><div class="ttdef"><b>Definition:</b> <a href="datatypes_8h_source.html#l00046">datatypes.h:46</a></div></div>
<div class="ttc" id="ADXL362_8h_html_a76886733862257ff800cd5924e0c3e76"><div class="ttname"><a href="ADXL362_8h.html#a76886733862257ff800cd5924e0c3e76">ADXL_enableSPI</a></div><div class="ttdeci">void ADXL_enableSPI(bool enabled)</div><div class="ttdoc">Enable or disable the SPI pins and USART0/1 clock and peripheral to the accelerometer. </div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8c_source.html#l00215">ADXL362.c:215</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_afa86994dcd9da11c714337b4f201d100"><div class="ttname"><a href="pin__mapping_8h.html#afa86994dcd9da11c714337b4f201d100">PM_RN2483_PORT</a></div><div class="ttdeci">#define PM_RN2483_PORT</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00106">pin_mapping.h:106</a></div></div>
<div class="ttc" id="cable_8h_html"><div class="ttname"><a href="cable_8h.html">cable.h</a></div><div class="ttdoc">Cable checking functionality. </div></div>
<div class="ttc" id="util_8h_html_ab212081592c908bf57b591e3c6e7483d"><div class="ttname"><a href="util_8h.html#ab212081592c908bf57b591e3c6e7483d">error</a></div><div class="ttdeci">void error(uint8_t number)</div><div class="ttdoc">Error method. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00109">util.c:109</a></div></div>
<div class="ttc" id="lora__wrappers_8h_html_a0dd2587b8cfad6058cc4a8cef957b324"><div class="ttname"><a href="lora__wrappers_8h.html#a0dd2587b8cfad6058cc4a8cef957b324">sendMeasurements</a></div><div class="ttdeci">void sendMeasurements(MeasurementData_t data)</div><div class="ttdoc">Send measured battery voltages and internal and external temperatures to the cloud using LoRaWAN...</div><div class="ttdef"><b>Definition:</b> <a href="lora__wrappers_8c_source.html#l00125">lora_wrappers.c:125</a></div></div>
<div class="ttc" id="ADXL362_8h_html_a1f41212fbb669b45200d0d72d6bea1aca01748c0a0ebbcd2b912b062b25a6a374"><div class="ttname"><a href="ADXL362_8h.html#a1f41212fbb669b45200d0d72d6bea1aca01748c0a0ebbcd2b912b062b25a6a374">ADXL_ODR_12_5</a></div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8h_source.html#l00030">ADXL362.h:30</a></div></div>
<div class="ttc" id="lora__wrappers_8h_html_ad081e2fea9e62cd0e6db6789ceb2ae1e"><div class="ttname"><a href="lora__wrappers_8h.html#ad081e2fea9e62cd0e6db6789ceb2ae1e">sendCableBroken</a></div><div class="ttdeci">void sendCableBroken(bool cableBroken)</div><div class="ttdoc">Send a packet to the cloud using LoRaWAN to indicate that the cable is broken. </div><div class="ttdef"><b>Definition:</b> <a href="lora__wrappers_8c_source.html#l00174">lora_wrappers.c:174</a></div></div>
<div class="ttc" id="ADXL362_8h_html_a40573570150c448c0504097f13b96cea"><div class="ttname"><a href="ADXL362_8h.html#a40573570150c448c0504097f13b96cea">ADXL_ackInterrupt</a></div><div class="ttdeci">void ADXL_ackInterrupt(void)</div><div class="ttdoc">Acknowledge the interrupt from the accelerometer. </div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8c_source.html#l00200">ADXL362.c:200</a></div></div>
<div class="ttc" id="lora__wrappers_8h_html_aa76d53437f8d435aecff9f085ce22155"><div class="ttname"><a href="lora__wrappers_8h.html#aa76d53437f8d435aecff9f085ce22155">sendTest</a></div><div class="ttdeci">void sendTest(MeasurementData_t data)</div><div class="ttdoc">Send ONE measured battery voltage, internal and external temperature, stormDetected, cableBroken and status value to the cloud using LoRaWAN. This method uses the deprecated methods to test if the data gets send correctly. </div><div class="ttdef"><b>Definition:</b> <a href="lora__wrappers_8c_source.html#l00217">lora_wrappers.c:217</a></div></div>
<div class="ttc" id="cable_8h_html_af3994387a62811a825f973e1a09a533a"><div class="ttname"><a href="cable_8h.html#af3994387a62811a825f973e1a09a533a">checkCable</a></div><div class="ttdeci">bool checkCable(void)</div><div class="ttdoc">Method to check if the wire is broken. </div><div class="ttdef"><b>Definition:</b> <a href="cable_8c_source.html#l00056">cable.c:56</a></div></div>
<div class="ttc" id="util_8h_html"><div class="ttname"><a href="util_8h.html">util.h</a></div><div class="ttdoc">Utility functionality. </div></div>
<div class="ttc" id="lora__wrappers_8h_html_aa124f250dab5120ab1199f7592e06ae4"><div class="ttname"><a href="lora__wrappers_8h.html#aa124f250dab5120ab1199f7592e06ae4">disableLoRaWAN</a></div><div class="ttdeci">void disableLoRaWAN(void)</div><div class="ttdoc">Disable LoRaWAN functionality. </div><div class="ttdef"><b>Definition:</b> <a href="lora__wrappers_8c_source.html#l00079">lora_wrappers.c:79</a></div></div>
<div class="ttc" id="interrupt_8h_html_a7e35708d61d26e9fe559a5545cdad810"><div class="ttname"><a href="interrupt_8h.html#a7e35708d61d26e9fe559a5545cdad810">initGPIOwakeup</a></div><div class="ttdeci">void initGPIOwakeup(void)</div><div class="ttdoc">Initialize GPIO wake-up functionality. </div><div class="ttdef"><b>Definition:</b> <a href="interrupt_8c_source.html#l00073">interrupt.c:73</a></div></div>
<div class="ttc" id="pin__mapping_8h_html"><div class="ttname"><a href="pin__mapping_8h.html">pin_mapping.h</a></div><div class="ttdoc">The pin definitions for the regular and custom Happy Gecko board. </div></div>
<div class="ttc" id="structMeasurementData__t_html"><div class="ttname"><a href="structMeasurementData__t.html">MeasurementData_t</a></div><div class="ttdef"><b>Definition:</b> <a href="datatypes_8h_source.html#l00042">datatypes.h:42</a></div></div>
<div class="ttc" id="delay_8h_html"><div class="ttname"><a href="delay_8h.html">delay.h</a></div><div class="ttdoc">Delay functionality. </div></div>
<div class="ttc" id="lora__wrappers_8h_html_a66be1f59b1529ebee2fb41b252c05a52"><div class="ttname"><a href="lora__wrappers_8h.html#a66be1f59b1529ebee2fb41b252c05a52">initLoRaWAN</a></div><div class="ttdeci">void initLoRaWAN(void)</div><div class="ttdoc">Initialize LoRaWAN functionality. </div><div class="ttdef"><b>Definition:</b> <a href="lora__wrappers_8c_source.html#l00064">lora_wrappers.c:64</a></div></div>
<div class="ttc" id="interrupt_8h_html"><div class="ttname"><a href="interrupt_8h.html">interrupt.h</a></div><div class="ttdoc">Interrupt functionality. </div></div>
<div class="ttc" id="adc_8h_html_a8d24200decb8cc61e4c749c435e80926a33dfae05581973af118a10481e139aba"><div class="ttname"><a href="adc_8h.html#a8d24200decb8cc61e4c749c435e80926a33dfae05581973af118a10481e139aba">BATTERY_VOLTAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="adc_8h_source.html#l00021">adc.h:21</a></div></div>
<div class="ttc" id="delay_8h_html_a072ccec54e047acce2566984c28b0232"><div class="ttname"><a href="delay_8h.html#a072ccec54e047acce2566984c28b0232">RTC_clearWakeup</a></div><div class="ttdeci">void RTC_clearWakeup(void)</div><div class="ttdoc">Method to clear RTC_sleep_wakeup. </div><div class="ttdef"><b>Definition:</b> <a href="delay_8c_source.html#l00355">delay.c:355</a></div></div>
<div class="ttc" id="lora__wrappers_8h_html"><div class="ttname"><a href="lora__wrappers_8h.html">lora_wrappers.h</a></div><div class="ttdoc">LoRa wrapper methods. </div></div>
<div class="ttc" id="datatypes_8h_html_a68d90e0eaaa236e9664bbfc691bbd4d4a9204d962c01740d01d1ea40b219a0472"><div class="ttname"><a href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a9204d962c01740d01d1ea40b219a0472">WAKEUP</a></div><div class="ttdef"><b>Definition:</b> <a href="datatypes_8h_source.html#l00037">datatypes.h:37</a></div></div>
<div class="ttc" id="structMeasurementData__t_html_a1d38052acf06a960cebc9c2cf6e4dbd9"><div class="ttname"><a href="structMeasurementData__t.html#a1d38052acf06a960cebc9c2cf6e4dbd9">MeasurementData_t::extTemp</a></div><div class="ttdeci">int32_t extTemp[6]</div><div class="ttdef"><b>Definition:</b> <a href="datatypes_8h_source.html#l00047">datatypes.h:47</a></div></div>
<div class="ttc" id="delay_8h_html_adb46f4276f5ddf111153701858f85df6"><div class="ttname"><a href="delay_8h.html#adb46f4276f5ddf111153701858f85df6">delay</a></div><div class="ttdeci">void delay(uint32_t msDelay)</div><div class="ttdoc">Wait for a certain amount of milliseconds in EM2/3. </div><div class="ttdef"><b>Definition:</b> <a href="delay_8c_source.html#l00089">delay.c:89</a></div></div>
<div class="ttc" id="ADXL362_8h_html_aff08c54a3f0c4ad752a9f85e761762f5"><div class="ttname"><a href="ADXL362_8h.html#aff08c54a3f0c4ad752a9f85e761762f5">ADXL_configRange</a></div><div class="ttdeci">void ADXL_configRange(ADXL_Range_t givenRange)</div><div class="ttdoc">Configure the measurement range and store the selected one in a global variable for later (internal) ...</div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8c_source.html#l00322">ADXL362.c:322</a></div></div>
<div class="ttc" id="ADXL362_8h_html_a94fe350d1a382c347c5aec424d573af8"><div class="ttname"><a href="ADXL362_8h.html#a94fe350d1a382c347c5aec424d573af8">ADXL_configActivity</a></div><div class="ttdeci">void ADXL_configActivity(uint8_t gThreshold)</div><div class="ttdoc">Configure the accelerometer to work in activity threshold mode. </div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8c_source.html#l00420">ADXL362.c:420</a></div></div>
<div class="ttc" id="main_8c_html_ae1c1201a004beb35d405fd396f53f86c"><div class="ttname"><a href="main_8c.html#ae1c1201a004beb35d405fd396f53f86c">WAKE_UP_PERIOD_S</a></div><div class="ttdeci">#define WAKE_UP_PERIOD_S</div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00136">main.c:136</a></div></div>
<div class="ttc" id="adc_8h_html_a8d24200decb8cc61e4c749c435e80926a536d05df6092745fa011adfed26e6312"><div class="ttname"><a href="adc_8h.html#a8d24200decb8cc61e4c749c435e80926a536d05df6092745fa011adfed26e6312">INTERNAL_TEMPERATURE</a></div><div class="ttdef"><b>Definition:</b> <a href="adc_8h_source.html#l00022">adc.h:22</a></div></div>
<div class="ttc" id="main_8c_html_ab6f4105e91cccc9ef2e95660ecf31622"><div class="ttname"><a href="main_8c.html#ab6f4105e91cccc9ef2e95660ecf31622">MCUstate</a></div><div class="ttdeci">static MCU_State_t MCUstate</div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00149">main.c:149</a></div></div>
<div class="ttc" id="main_8c_html_a0f0eb9c2fcd0551bc741bb80081a6e2e"><div class="ttname"><a href="main_8c.html#a0f0eb9c2fcd0551bc741bb80081a6e2e">STORM_INTERRUPTS</a></div><div class="ttdeci">#define STORM_INTERRUPTS</div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00139">main.c:139</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_a0223987bdf0e26bd8b25781db5f371d2"><div class="ttname"><a href="pin__mapping_8h.html#a0223987bdf0e26bd8b25781db5f371d2">PM_SENS_EXT_PORT</a></div><div class="ttdeci">#define PM_SENS_EXT_PORT</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00108">pin_mapping.h:108</a></div></div>
<div class="ttc" id="datatypes_8h_html_aaaac3cd1355a2985b6f312f60d5919ab"><div class="ttname"><a href="datatypes_8h.html#aaaac3cd1355a2985b6f312f60d5919ab">MCU_State_t</a></div><div class="ttdeci">enum mcu_states MCU_State_t</div></div>
<div class="ttc" id="adc_8h_html_ac6cece90b77d0ba6c1afaf17f57bb790"><div class="ttname"><a href="adc_8h.html#ac6cece90b77d0ba6c1afaf17f57bb790">readADC</a></div><div class="ttdeci">int32_t readADC(ADC_Measurement_t peripheral)</div><div class="ttdoc">Method to read the battery voltage or internal temperature. </div><div class="ttdef"><b>Definition:</b> <a href="adc_8c_source.html#l00134">adc.c:134</a></div></div>
<div class="ttc" id="datatypes_8h_html_a68d90e0eaaa236e9664bbfc691bbd4d4a0cb1b2c6a7db1f1084886c98909a3f36"><div class="ttname"><a href="datatypes_8h.html#a68d90e0eaaa236e9664bbfc691bbd4d4a0cb1b2c6a7db1f1084886c98909a3f36">INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="datatypes_8h_source.html#l00031">datatypes.h:31</a></div></div>
<div class="ttc" id="ADXL362_8h_html_a5fb1203de521040cf84015c2d0bc4ac8aa5eefb16dc53ffa7754658b1f9ecce07"><div class="ttname"><a href="ADXL362_8h.html#a5fb1203de521040cf84015c2d0bc4ac8aa5eefb16dc53ffa7754658b1f9ecce07">ADXL_RANGE_8G</a></div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8h_source.html#l00024">ADXL362.h:24</a></div></div>
<div class="ttc" id="structMeasurementData__t_html_a05ea65bcd1951501f9437451440174bd"><div class="ttname"><a href="structMeasurementData__t.html#a05ea65bcd1951501f9437451440174bd">MeasurementData_t::voltage</a></div><div class="ttdeci">int32_t voltage[6]</div><div class="ttdef"><b>Definition:</b> <a href="datatypes_8h_source.html#l00045">datatypes.h:45</a></div></div>
<div class="ttc" id="delay_8h_html_a7bfbeaf084abaa0fc6baf77a1640b598"><div class="ttname"><a href="delay_8h.html#a7bfbeaf084abaa0fc6baf77a1640b598">RTC_checkWakeup</a></div><div class="ttdeci">bool RTC_checkWakeup(void)</div><div class="ttdoc">Method to check if the wakeup was caused by the RTC. </div><div class="ttdef"><b>Definition:</b> <a href="delay_8c_source.html#l00345">delay.c:345</a></div></div>
<div class="ttc" id="delay_8h_html_aae86f940455b5957441f4331cdc0828d"><div class="ttname"><a href="delay_8h.html#aae86f940455b5957441f4331cdc0828d">sleep</a></div><div class="ttdeci">void sleep(uint32_t sSleep)</div><div class="ttdoc">Sleep for a certain amount of seconds in EM2/3. </div><div class="ttdef"><b>Definition:</b> <a href="delay_8c_source.html#l00229">delay.c:229</a></div></div>
<div class="ttc" id="main_8c_html_a840291bc02cba5474a4cb46a9b9566fe"><div class="ttname"><a href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a></div><div class="ttdeci">int main(void)</div><div class="ttdoc">Main function. </div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00200">main.c:200</a></div></div>
<div class="ttc" id="util_8h_html_ae4f2649524bfb723543f0dc939cd0ddd"><div class="ttname"><a href="util_8h.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a></div><div class="ttdeci">void led(bool enabled)</div><div class="ttdoc">Enable or disable the LED. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00079">util.c:79</a></div></div>
<div class="ttc" id="DS18B20_8h_html_ac3219638734d78805b64daa2cad58867"><div class="ttname"><a href="DS18B20_8h.html#ac3219638734d78805b64daa2cad58867">readTempDS18B20</a></div><div class="ttdeci">int32_t readTempDS18B20(void)</div><div class="ttdoc">Get a temperature value from the DS18B20. </div><div class="ttdef"><b>Definition:</b> <a href="DS18B20_8c_source.html#l00080">DS18B20.c:80</a></div></div>
<div class="ttc" id="DS18B20_8h_html"><div class="ttname"><a href="DS18B20_8h.html">DS18B20.h</a></div><div class="ttdoc">All code for the DS18B20 temperature sensor. </div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_952e9747e32fbb216a31eb66ba91adc1.html">EFM32HG-Embedded2-project</a></li><li class="navelem"><a class="el" href="dir_4be578414597071060019317d61cdf19.html">src</a></li><li class="navelem"><a class="el" href="main_8c.html">main.c</a></li>
    <li class="footer">Generated on Thu May 2 2019 01:16:14 for Embedded System Design 2 - Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
