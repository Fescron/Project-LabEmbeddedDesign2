<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Embedded System Design 2 - Project: EFM32HG-Embedded2-project/src/util.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Embedded System Design 2 - Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('util_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">util.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Utility functionality.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;em_cmu.h&quot;</code><br />
<code>#include &quot;em_gpio.h&quot;</code><br />
<code>#include &quot;<a class="el" href="util_8h_source.html">util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pin__mapping_8h_source.html">pin_mapping.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="debug__dbprint_8h_source.html">debug_dbprint.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="delay_8h_source.html">delay.h</a>&quot;</code><br />
</div>
<p><a href="util_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adf3c8631eb91b6652b542a92790d936a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#adf3c8631eb91b6652b542a92790d936a">initLED</a> (void)</td></tr>
<tr class="memdesc:adf3c8631eb91b6652b542a92790d936a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the LED.  <a href="#adf3c8631eb91b6652b542a92790d936a">More...</a><br /></td></tr>
<tr class="separator:adf3c8631eb91b6652b542a92790d936a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4f2649524bfb723543f0dc939cd0ddd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#ae4f2649524bfb723543f0dc939cd0ddd">led</a> (bool enabled)</td></tr>
<tr class="memdesc:ae4f2649524bfb723543f0dc939cd0ddd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable or disable the LED.  <a href="#ae4f2649524bfb723543f0dc939cd0ddd">More...</a><br /></td></tr>
<tr class="separator:ae4f2649524bfb723543f0dc939cd0ddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab212081592c908bf57b591e3c6e7483d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#ab212081592c908bf57b591e3c6e7483d">error</a> (uint8_t number)</td></tr>
<tr class="memdesc:ab212081592c908bf57b591e3c6e7483d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error method.  <a href="#ab212081592c908bf57b591e3c6e7483d">More...</a><br /></td></tr>
<tr class="separator:ab212081592c908bf57b591e3c6e7483d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a23665a34dee037d541a3f7c4de0da810"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#a23665a34dee037d541a3f7c4de0da810">errorNumber</a> = 0</td></tr>
<tr class="separator:a23665a34dee037d541a3f7c4de0da810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2af22783f212248cfba486cc8d9b8b40"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#a2af22783f212248cfba486cc8d9b8b40">LED_initialized</a> = false</td></tr>
<tr class="separator:a2af22783f212248cfba486cc8d9b8b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Utility functionality. </p>
<dl class="section version"><dt>Version</dt><dd>3.0 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Brecht Van Eeckhoudt</dd></dl>
<hr/>
<h1><a class="anchor" id="Versions"></a>
Versions</h1>
<ul>
<li>v1.0: Started with the code from <a href="https://github.com/Fescron/Project-LabEmbeddedDesign1/tree/master/code/SLSTK3400A_ADXL362">https://github.com/Fescron/Project-LabEmbeddedDesign1/tree/master/code/SLSTK3400A_ADXL362</a> </li>
<li>v1.1: Changed PinModeSet DOUT value to 0 in initLED. </li>
<li>v1.2: Removed unnecessary <code>GPIO_PinOutClear</code> line in initLED. </li>
<li>v1.3: Moved initRTCcomp method from <code><a class="el" href="main_8c.html" title="The main file for Project 2 from Embedded System Design 2 - Lab. ">main.c</a></code> to here, added delay functionality which goes into EM1 or EM2. </li>
<li>v1.4: Moved delay functionality to specific header and source files. </li>
<li>v2.0: Changed <code>Error()</code> to <code><a class="el" href="util_8c.html#ab212081592c908bf57b591e3c6e7483d" title="Error method. ">error()</a></code>, added a global variable to keep the error number and initialize the pin of the LED automatically. </li>
<li>v2.1: Changed initLED to be a static (~hidden) method and also made the global variables static. </li>
<li>v2.2: Added peripheral clock enable/disable functionality for energy saving purposes, only added necessary includes in header file, moved the others to the source file, updated documentation, replaced SysTick delay with RTCC delay, changed error delay length. </li>
<li>v2.3: Changed name of static variable, simplified some logic. </li>
<li>v2.4: Stopped disabling the GPIO clock. </li>
<li>v2.5: Moved documentation. </li>
<li>v2.6: Updated code with new DEFINE checks. </li>
<li>v2.7: Added functionality to send error values using LoRaWAN. </li>
<li>v2.8: Added the ability to enable/disable error forwarding to the cloud using a public definition and changed UART error color. </li>
<li>v3.0: Updated version number.</li>
</ul>
<hr/>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd><b>Future improvements:</b><br />
<ul>
<li>Only send a maximum amount of errors to the could using LoRaWAN according to a defined value.<ul>
<li>Reset the counter in the MEASURE/SEND state?</li>
</ul>
</li>
<li>Go back to INIT state on an error call?<ul>
<li><code>GOTO</code> is supported in C but is dangerous to use (nested loops, ...)</li>
<li>Check if the clock functionality doesn't break when this is implemented ...</li>
</ul>
</li>
</ul>
</dd></dl>
<hr/>
<h1><a class="anchor" id="License"></a>
License</h1>
<p><b>Copyright (C) 2019 - Brecht Van Eeckhoudt</b></p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the <b>GNU General Public License</b> as published by the Free Software Foundation, either <b>version 3</b> of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p><em>A copy of the GNU General Public License can be found in the <code>LICENSE</code> file along with this source code.</em></p>
<p><br />
 Some methods use code obtained from examples from <a href="https://github.com/SiliconLabs/peripheral_examples">Silicon Labs' GitHub</a>. These sections are licensed under the Silabs License Agreement. See the file "Silabs_License_Agreement.txt" for details. Before using this software for any purpose, you must agree to the terms of that agreement. </p>

<p class="definition">Definition in file <a class="el" href="util_8c_source.html">util.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ab212081592c908bf57b591e3c6e7483d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab212081592c908bf57b591e3c6e7483d">&#9670;&nbsp;</a></span>error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void error </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>number</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Error method. </p>
<p><b>ERROR_FORWARDING == 0</b><br />
 The method flashes the LED, displays a UART message and holds the MCU forever in a loop until it gets reset. The error value gets stored in a global variable.</p>
<p><b>ERROR_FORWARDING == 1</b><br />
 The method sends the error value to the cloud using LoRaWAN if the error number doesn't correspond to LoRaWAN-related functionality (numbers 30 - 55).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">number</td><td>The number to indicate where in the code the error was thrown. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="util_8c_source.html#l00130">130</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">/* Initialize LED if not already the case */</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="util_8c.html#a2af22783f212248cfba486cc8d9b8b40">LED_initialized</a>) <a class="code" href="util_8c.html#adf3c8631eb91b6652b542a92790d936a">initLED</a>();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">/* Save the given number in the global variable */</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="util_8c.html#a23665a34dee037d541a3f7c4de0da810">errorNumber</a> = number;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor">#if ERROR_FORWARDING == 0 </span><span class="comment">/* ERROR_FORWARDING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#if DEBUG_DBPRINT == 1 </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="dbprint_8c.html#ad6b8e79e52a31b01f5816cdd62fb1746">dbprint_color</a>(<span class="stringliteral">&quot;&gt;&gt;&gt; Error (&quot;</span>, 5);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="dbprint_8c.html#a4e4e18f85e358d8cc702ea8c2f190503">dbprintInt</a>(number);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="dbprint_8c.html#aeac6ad47896a658b0753fa0ef8040e6c">dbprintln_color</a>(<span class="stringliteral">&quot;)! Please reset MCU. &lt;&lt;&lt;&quot;</span>, 5);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">while</span> (1)</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="delay_8h.html#adb46f4276f5ddf111153701858f85df6">delay</a>(100);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        GPIO_PinOutToggle(<a class="code" href="pin__mapping_8h.html#a663daa01e565aee93c6f20c5845b90b4">LED_PORT</a>, <a class="code" href="pin__mapping_8h.html#ab4553be4db9860d940f81d7447173b2f">LED_PIN</a>); <span class="comment">/* Toggle LED */</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* ERROR_FORWARDING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">/* Check if the error number isn&#39;t called in LoRaWAN functionality */</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> ((number &lt; 30) || (number &gt; 55))</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#if DEBUG_DBPRINT == 1 </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="dbprint_8c.html#ad6b8e79e52a31b01f5816cdd62fb1746">dbprint_color</a>(<span class="stringliteral">&quot;&gt;&gt;&gt; Error (&quot;</span>, 5);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <a class="code" href="dbprint_8c.html#a4e4e18f85e358d8cc702ea8c2f190503">dbprintInt</a>(number);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="dbprint_8c.html#aeac6ad47896a658b0753fa0ef8040e6c">dbprintln_color</a>(<span class="stringliteral">&quot;)! Sending the message to the cloud. &lt;&lt;&lt;&quot;</span>, 5);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <a class="code" href="lora__wrappers_8h.html#a66be1f59b1529ebee2fb41b252c05a52">initLoRaWAN</a>(); <span class="comment">/* Initialize LoRaWAN functionality */</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="lora__wrappers_8h.html#a900b2eed7f831b30011786316972c338">sendStatus</a>(number); <span class="comment">/* Send the status value */</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <a class="code" href="lora__wrappers_8h.html#aa124f250dab5120ab1199f7592e06ae4">disableLoRaWAN</a>(); <span class="comment">/* Disable RN2483 */</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#if DEBUG_DBPRINT == 1 </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="dbprint_8c.html#ad6b8e79e52a31b01f5816cdd62fb1746">dbprint_color</a>(<span class="stringliteral">&quot;&gt;&gt;&gt; Error in LoRaWAN functionality (&quot;</span>, 5);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <a class="code" href="dbprint_8c.html#a4e4e18f85e358d8cc702ea8c2f190503">dbprintInt</a>(number);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="dbprint_8c.html#aeac6ad47896a658b0753fa0ef8040e6c">dbprintln_color</a>(<span class="stringliteral">&quot;)! &lt;&lt;&lt;&quot;</span>, 5);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ERROR_FORWARDING */</span><span class="preprocessor"></span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div><div class="ttc" id="lora__wrappers_8h_html_aa124f250dab5120ab1199f7592e06ae4"><div class="ttname"><a href="lora__wrappers_8h.html#aa124f250dab5120ab1199f7592e06ae4">disableLoRaWAN</a></div><div class="ttdeci">void disableLoRaWAN(void)</div><div class="ttdoc">Disable LoRaWAN functionality. </div><div class="ttdef"><b>Definition:</b> <a href="lora__wrappers_8c_source.html#l00114">lora_wrappers.c:114</a></div></div>
<div class="ttc" id="lora__wrappers_8h_html_a66be1f59b1529ebee2fb41b252c05a52"><div class="ttname"><a href="lora__wrappers_8h.html#a66be1f59b1529ebee2fb41b252c05a52">initLoRaWAN</a></div><div class="ttdeci">void initLoRaWAN(void)</div><div class="ttdoc">Initialize LoRaWAN functionality. </div><div class="ttdef"><b>Definition:</b> <a href="lora__wrappers_8c_source.html#l00091">lora_wrappers.c:91</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_a663daa01e565aee93c6f20c5845b90b4"><div class="ttname"><a href="pin__mapping_8h.html#a663daa01e565aee93c6f20c5845b90b4">LED_PORT</a></div><div class="ttdeci">#define LED_PORT</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00085">pin_mapping.h:85</a></div></div>
<div class="ttc" id="lora__wrappers_8h_html_a900b2eed7f831b30011786316972c338"><div class="ttname"><a href="lora__wrappers_8h.html#a900b2eed7f831b30011786316972c338">sendStatus</a></div><div class="ttdeci">void sendStatus(uint8_t status)</div><div class="ttdoc">Send a packet to indicate a status. </div><div class="ttdef"><b>Definition:</b> <a href="lora__wrappers_8c_source.html#l00285">lora_wrappers.c:285</a></div></div>
<div class="ttc" id="util_8c_html_a2af22783f212248cfba486cc8d9b8b40"><div class="ttname"><a href="util_8c.html#a2af22783f212248cfba486cc8d9b8b40">LED_initialized</a></div><div class="ttdeci">static bool LED_initialized</div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00084">util.c:84</a></div></div>
<div class="ttc" id="delay_8h_html_adb46f4276f5ddf111153701858f85df6"><div class="ttname"><a href="delay_8h.html#adb46f4276f5ddf111153701858f85df6">delay</a></div><div class="ttdeci">void delay(uint32_t msDelay)</div><div class="ttdoc">Wait for a certain amount of milliseconds in EM2/3. </div><div class="ttdef"><b>Definition:</b> <a href="delay_8c_source.html#l00115">delay.c:115</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_ab4553be4db9860d940f81d7447173b2f"><div class="ttname"><a href="pin__mapping_8h.html#ab4553be4db9860d940f81d7447173b2f">LED_PIN</a></div><div class="ttdeci">#define LED_PIN</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00086">pin_mapping.h:86</a></div></div>
<div class="ttc" id="dbprint_8c_html_a4e4e18f85e358d8cc702ea8c2f190503"><div class="ttname"><a href="dbprint_8c.html#a4e4e18f85e358d8cc702ea8c2f190503">dbprintInt</a></div><div class="ttdeci">void dbprintInt(int32_t value)</div><div class="ttdoc">Print a number in decimal notation to USARTx. </div><div class="ttdef"><b>Definition:</b> <a href="dbprint_8c_source.html#l00736">dbprint.c:736</a></div></div>
<div class="ttc" id="dbprint_8c_html_aeac6ad47896a658b0753fa0ef8040e6c"><div class="ttname"><a href="dbprint_8c.html#aeac6ad47896a658b0753fa0ef8040e6c">dbprintln_color</a></div><div class="ttdeci">void dbprintln_color(char *message, dbprint_color_t color)</div><div class="ttdoc">Print a string (char array) to USARTx in a given color and go to the next line. </div><div class="ttdef"><b>Definition:</b> <a href="dbprint_8c_source.html#l00478">dbprint.c:478</a></div></div>
<div class="ttc" id="util_8c_html_a23665a34dee037d541a3f7c4de0da810"><div class="ttname"><a href="util_8c.html#a23665a34dee037d541a3f7c4de0da810">errorNumber</a></div><div class="ttdeci">static uint8_t errorNumber</div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00083">util.c:83</a></div></div>
<div class="ttc" id="util_8c_html_adf3c8631eb91b6652b542a92790d936a"><div class="ttname"><a href="util_8c.html#adf3c8631eb91b6652b542a92790d936a">initLED</a></div><div class="ttdeci">static void initLED(void)</div><div class="ttdoc">Initialize the LED. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00193">util.c:193</a></div></div>
<div class="ttc" id="dbprint_8c_html_ad6b8e79e52a31b01f5816cdd62fb1746"><div class="ttname"><a href="dbprint_8c.html#ad6b8e79e52a31b01f5816cdd62fb1746">dbprint_color</a></div><div class="ttdeci">void dbprint_color(char *message, dbprint_color_t color)</div><div class="ttdoc">Print a string (char array) to USARTx in a given color. </div><div class="ttdef"><b>Definition:</b> <a href="dbprint_8c_source.html#l00419">dbprint.c:419</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adf3c8631eb91b6652b542a92790d936a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf3c8631eb91b6652b542a92790d936a">&#9670;&nbsp;</a></span>initLED()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void initLED </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the LED. </p>
<dl class="section note"><dt>Note</dt><dd>This is a static method because it's only internally used in this file and called by other methods if necessary. </dd></dl>

<p class="definition">Definition at line <a class="el" href="util_8c_source.html#l00193">193</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;{</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">/* Enable necessary clocks (just in case) */</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    CMU_ClockEnable(cmuClock_HFPER, <span class="keyword">true</span>); <span class="comment">/* GPIO is a High Frequency Peripheral */</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    CMU_ClockEnable(cmuClock_GPIO, <span class="keyword">true</span>);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">/* In the case of gpioModePushPull, the last argument directly sets the pin state */</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    GPIO_PinModeSet(<a class="code" href="pin__mapping_8h.html#a663daa01e565aee93c6f20c5845b90b4">LED_PORT</a>, <a class="code" href="pin__mapping_8h.html#ab4553be4db9860d940f81d7447173b2f">LED_PIN</a>, gpioModePushPull, 0);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">#if DEBUG_DBPRINT == 1 </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="dbprint_8c.html#acb5d4e1082c625ad85d835d4e053d4d8">dbinfo</a>(<span class="stringliteral">&quot;LED pin initialized&quot;</span>);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="util_8c.html#a2af22783f212248cfba486cc8d9b8b40">LED_initialized</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div><div class="ttc" id="dbprint_8c_html_acb5d4e1082c625ad85d835d4e053d4d8"><div class="ttname"><a href="dbprint_8c.html#acb5d4e1082c625ad85d835d4e053d4d8">dbinfo</a></div><div class="ttdeci">void dbinfo(char *message)</div><div class="ttdoc">Print an info string (char array) to USARTx and go to the next line. </div><div class="ttdef"><b>Definition:</b> <a href="dbprint_8c_source.html#l00501">dbprint.c:501</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_a663daa01e565aee93c6f20c5845b90b4"><div class="ttname"><a href="pin__mapping_8h.html#a663daa01e565aee93c6f20c5845b90b4">LED_PORT</a></div><div class="ttdeci">#define LED_PORT</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00085">pin_mapping.h:85</a></div></div>
<div class="ttc" id="util_8c_html_a2af22783f212248cfba486cc8d9b8b40"><div class="ttname"><a href="util_8c.html#a2af22783f212248cfba486cc8d9b8b40">LED_initialized</a></div><div class="ttdeci">static bool LED_initialized</div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00084">util.c:84</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_ab4553be4db9860d940f81d7447173b2f"><div class="ttname"><a href="pin__mapping_8h.html#ab4553be4db9860d940f81d7447173b2f">LED_PIN</a></div><div class="ttdeci">#define LED_PIN</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00086">pin_mapping.h:86</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4f2649524bfb723543f0dc939cd0ddd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4f2649524bfb723543f0dc939cd0ddd">&#9670;&nbsp;</a></span>led()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void led </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable or disable the LED. </p>
<p>This method also initializes the pin-mode if necessary.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">enabled</td><td><ul>
<li><code>true</code> - Enable LED. </li>
<li><code>false</code> - Disable LED. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="util_8c_source.html#l00102">102</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;{</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">/* Initialize LED if not already the case */</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="util_8c.html#a2af22783f212248cfba486cc8d9b8b40">LED_initialized</a>) <a class="code" href="util_8c.html#adf3c8631eb91b6652b542a92790d936a">initLED</a>();</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">/* Set the selected state */</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (enabled) GPIO_PinOutSet(<a class="code" href="pin__mapping_8h.html#a663daa01e565aee93c6f20c5845b90b4">LED_PORT</a>, <a class="code" href="pin__mapping_8h.html#ab4553be4db9860d940f81d7447173b2f">LED_PIN</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">else</span> GPIO_PinOutClear(<a class="code" href="pin__mapping_8h.html#a663daa01e565aee93c6f20c5845b90b4">LED_PORT</a>, <a class="code" href="pin__mapping_8h.html#ab4553be4db9860d940f81d7447173b2f">LED_PIN</a>);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div><div class="ttc" id="pin__mapping_8h_html_a663daa01e565aee93c6f20c5845b90b4"><div class="ttname"><a href="pin__mapping_8h.html#a663daa01e565aee93c6f20c5845b90b4">LED_PORT</a></div><div class="ttdeci">#define LED_PORT</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00085">pin_mapping.h:85</a></div></div>
<div class="ttc" id="util_8c_html_a2af22783f212248cfba486cc8d9b8b40"><div class="ttname"><a href="util_8c.html#a2af22783f212248cfba486cc8d9b8b40">LED_initialized</a></div><div class="ttdeci">static bool LED_initialized</div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00084">util.c:84</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_ab4553be4db9860d940f81d7447173b2f"><div class="ttname"><a href="pin__mapping_8h.html#ab4553be4db9860d940f81d7447173b2f">LED_PIN</a></div><div class="ttdeci">#define LED_PIN</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00086">pin_mapping.h:86</a></div></div>
<div class="ttc" id="util_8c_html_adf3c8631eb91b6652b542a92790d936a"><div class="ttname"><a href="util_8c.html#adf3c8631eb91b6652b542a92790d936a">initLED</a></div><div class="ttdeci">static void initLED(void)</div><div class="ttdoc">Initialize the LED. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00193">util.c:193</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a23665a34dee037d541a3f7c4de0da810"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23665a34dee037d541a3f7c4de0da810">&#9670;&nbsp;</a></span>errorNumber</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t errorNumber = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="util_8c_source.html#l00083">83</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

</div>
</div>
<a id="a2af22783f212248cfba486cc8d9b8b40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2af22783f212248cfba486cc8d9b8b40">&#9670;&nbsp;</a></span>LED_initialized</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool LED_initialized = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="util_8c_source.html#l00084">84</a> of file <a class="el" href="util_8c_source.html">util.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_952e9747e32fbb216a31eb66ba91adc1.html">EFM32HG-Embedded2-project</a></li><li class="navelem"><a class="el" href="dir_4be578414597071060019317d61cdf19.html">src</a></li><li class="navelem"><a class="el" href="util_8c.html">util.c</a></li>
    <li class="footer">Generated on Tue Oct 1 2019 14:39:10 for Embedded System Design 2 - Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
