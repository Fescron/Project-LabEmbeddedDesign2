<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Embedded System Design 2 - Project: EFM32HG-Embedded2-project/src/interrupt.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Embedded System Design 2 - Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('interrupt_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">interrupt.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Interrupt functionality.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;em_device.h&quot;</code><br />
<code>#include &quot;em_cmu.h&quot;</code><br />
<code>#include &quot;em_gpio.h&quot;</code><br />
<code>#include &quot;em_rtc.h&quot;</code><br />
<code>#include &quot;<a class="el" href="interrupt_8h_source.html">interrupt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pin__mapping_8h_source.html">pin_mapping.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="debug__dbprint_8h_source.html">debug_dbprint.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="util_8h_source.html">util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ADXL362_8h_source.html">ADXL362.h</a>&quot;</code><br />
</div>
<p><a href="interrupt_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7e35708d61d26e9fe559a5545cdad810"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a7e35708d61d26e9fe559a5545cdad810">initGPIOwakeup</a> (void)</td></tr>
<tr class="memdesc:a7e35708d61d26e9fe559a5545cdad810"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize GPIO wake-up functionality.  <a href="#a7e35708d61d26e9fe559a5545cdad810">More...</a><br /></td></tr>
<tr class="separator:a7e35708d61d26e9fe559a5545cdad810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab21b930d7d49ab29917b54408373414a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#ab21b930d7d49ab29917b54408373414a">BTN_getTriggered</a> (uint8_t number)</td></tr>
<tr class="memdesc:ab21b930d7d49ab29917b54408373414a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the <code>PB0_triggered</code> and <code>PB1_triggered</code> static variables.  <a href="#ab21b930d7d49ab29917b54408373414a">More...</a><br /></td></tr>
<tr class="separator:ab21b930d7d49ab29917b54408373414a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb85f76e16c270396851fad940339a4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#abb85f76e16c270396851fad940339a4b">BTN_setTriggered</a> (uint8_t number, bool value)</td></tr>
<tr class="memdesc:abb85f76e16c270396851fad940339a4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setter for the <code>PB0_triggered</code> and <code>PB1_triggered</code> static variable.  <a href="#abb85f76e16c270396851fad940339a4b">More...</a><br /></td></tr>
<tr class="separator:abb85f76e16c270396851fad940339a4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87d72653156b83829786f1f856ecbad1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a87d72653156b83829786f1f856ecbad1">GPIO_EVEN_IRQHandler</a> (void)</td></tr>
<tr class="memdesc:a87d72653156b83829786f1f856ecbad1"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO Even IRQ for pushbuttons on even-numbered pins.  <a href="#a87d72653156b83829786f1f856ecbad1">More...</a><br /></td></tr>
<tr class="separator:a87d72653156b83829786f1f856ecbad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fff5a798ff4721659dc7bdbb3149c8b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a8fff5a798ff4721659dc7bdbb3149c8b">GPIO_ODD_IRQHandler</a> (void)</td></tr>
<tr class="memdesc:a8fff5a798ff4721659dc7bdbb3149c8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO Odd IRQ for pushbuttons on odd-numbered pins.  <a href="#a8fff5a798ff4721659dc7bdbb3149c8b">More...</a><br /></td></tr>
<tr class="separator:a8fff5a798ff4721659dc7bdbb3149c8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a920e2adfdf9ac0189246152dabbb2929"><td class="memItemLeft" align="right" valign="top">static volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a920e2adfdf9ac0189246152dabbb2929">PB0_triggered</a> = false</td></tr>
<tr class="separator:a920e2adfdf9ac0189246152dabbb2929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a527d3b0da76a1ab45ccd89950cc891cd"><td class="memItemLeft" align="right" valign="top">static volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a527d3b0da76a1ab45ccd89950cc891cd">PB1_triggered</a> = false</td></tr>
<tr class="separator:a527d3b0da76a1ab45ccd89950cc891cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interrupt functionality. </p>
<dl class="section version"><dt>Version</dt><dd>3.0 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Brecht Van Eeckhoudt</dd></dl>
<hr/>
<h1><a class="anchor" id="Versions"></a>
Versions</h1>
<ul>
<li>v1.0: Started from <a href="https://github.com/Fescron/Project-LabEmbeddedDesign1">https://github.com/Fescron/Project-LabEmbeddedDesign1</a> </li>
<li>v1.1: Added dbprintln(""); above dbinfo statements in IRQ handlers to fix overwriting of text. </li>
<li>v1.2: Disabled the RTC counter if GPIO handlers are called, only added necessary includes in header file, moved the others to the source file, updated documentation. </li>
<li>v1.3: Started using set method for the static variable <code>ADXL_triggered</code>, added GPIO wakeup initialization method here, renamed file. </li>
<li>v1.4: Stopped disabling the GPIO clock. </li>
<li>v1.5: Started using getters/setters to indicate an interrupt to <code><a class="el" href="main_8c.html" title="The main file for Project 2 from Embedded System Design 2 - Lab. ">main.c</a></code>. </li>
<li>v1.6: Moved IRQ handler of RTC to this <code><a class="el" href="delay_8c.html" title="Delay functionality. ">delay.c</a></code>. </li>
<li>v1.7: Updated clear pending interrupt logic. </li>
<li>v1.8: Updated code with new DEFINE checks. </li>
<li>v1.9: Removed error calls for "unknown" pins and added flag check for custom Happy Gecko board pinout. </li>
<li>v2.0: Stopped disabling the RTC counter on pin interrupts. </li>
<li>v2.1: Disabled the RTC counter on a button push because it confused delays called in LoRaWAN code. </li>
<li>v2.2: Changed error numbering. </li>
<li>v3.0: Updated version number.</li>
</ul>
<hr/>
<dl class="section note"><dt>Note</dt><dd>Other interrupt handlers can be found in <code><a class="el" href="delay_8c.html" title="Delay functionality. ">delay.c</a></code> and <code><a class="el" href="adc_8c.html" title="ADC functionality for reading the (battery) voltage and internal temperature. ">adc.c</a></code>.</dd></dl>
<hr/>
<h1><a class="anchor" id="License"></a>
License</h1>
<p><b>Copyright (C) 2019 - Brecht Van Eeckhoudt</b></p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the <b>GNU General Public License</b> as published by the Free Software Foundation, either <b>version 3</b> of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p><em>A copy of the GNU General Public License can be found in the <code>LICENSE</code> file along with this source code.</em></p>
<p><br />
 Some methods use code obtained from examples from <a href="https://github.com/SiliconLabs/peripheral_examples">Silicon Labs' GitHub</a>. These sections are licensed under the Silabs License Agreement. See the file "Silabs_License_Agreement.txt" for details. Before using this software for any purpose, you must agree to the terms of that agreement. </p>

<p class="definition">Definition in file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ab21b930d7d49ab29917b54408373414a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab21b930d7d49ab29917b54408373414a">&#9670;&nbsp;</a></span>BTN_getTriggered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BTN_getTriggered </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>number</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter for the <code>PB0_triggered</code> and <code>PB1_triggered</code> static variables. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">number</td><td><ul>
<li><code>0</code> - <code>PB0_triggered</code> selected. </li>
<li><code>1</code> - <code>PB1_triggered</code> selected.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The value of <code>PB0_triggered</code> or <code>PB1_triggered</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00145">145</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (number == 0) <span class="keywordflow">return</span> (<a class="code" href="interrupt_8c.html#a920e2adfdf9ac0189246152dabbb2929">PB0_triggered</a>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (number == 1) <span class="keywordflow">return</span> (<a class="code" href="interrupt_8c.html#a527d3b0da76a1ab45ccd89950cc891cd">PB1_triggered</a>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">#if DEBUG_DBPRINT == 1 </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="dbprint_8c.html#afbbbe6e04352a6b56d1d8a053ec4f941">dbcrit</a>(<span class="stringliteral">&quot;Non-existing button selected!&quot;</span>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="util_8h.html#ab212081592c908bf57b591e3c6e7483d">error</a>(18);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">false</span>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="ttc" id="interrupt_8c_html_a920e2adfdf9ac0189246152dabbb2929"><div class="ttname"><a href="interrupt_8c.html#a920e2adfdf9ac0189246152dabbb2929">PB0_triggered</a></div><div class="ttdeci">static volatile bool PB0_triggered</div><div class="ttdef"><b>Definition:</b> <a href="interrupt_8c_source.html#l00079">interrupt.c:79</a></div></div>
<div class="ttc" id="interrupt_8c_html_a527d3b0da76a1ab45ccd89950cc891cd"><div class="ttname"><a href="interrupt_8c.html#a527d3b0da76a1ab45ccd89950cc891cd">PB1_triggered</a></div><div class="ttdeci">static volatile bool PB1_triggered</div><div class="ttdef"><b>Definition:</b> <a href="interrupt_8c_source.html#l00080">interrupt.c:80</a></div></div>
<div class="ttc" id="util_8h_html_ab212081592c908bf57b591e3c6e7483d"><div class="ttname"><a href="util_8h.html#ab212081592c908bf57b591e3c6e7483d">error</a></div><div class="ttdeci">void error(uint8_t number)</div><div class="ttdoc">Error method. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00130">util.c:130</a></div></div>
<div class="ttc" id="dbprint_8c_html_afbbbe6e04352a6b56d1d8a053ec4f941"><div class="ttname"><a href="dbprint_8c.html#afbbbe6e04352a6b56d1d8a053ec4f941">dbcrit</a></div><div class="ttdeci">void dbcrit(char *message)</div><div class="ttdoc">Print a critical error string (char array) in red to USARTx and go to the next line. </div><div class="ttdef"><b>Definition:</b> <a href="dbprint_8c_source.html#l00537">dbprint.c:537</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abb85f76e16c270396851fad940339a4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb85f76e16c270396851fad940339a4b">&#9670;&nbsp;</a></span>BTN_setTriggered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BTN_setTriggered </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setter for the <code>PB0_triggered</code> and <code>PB1_triggered</code> static variable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">number</td><td><ul>
<li><code>0</code> - <code>PB0_triggered selected</code>. </li>
<li><code>1</code> - <code>PB1_triggered selected</code>.</li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>The boolean value to set to the selected static variable. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00174">174</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;{</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (number == 0) <a class="code" href="interrupt_8c.html#a920e2adfdf9ac0189246152dabbb2929">PB0_triggered</a> = value;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (number == 1) <a class="code" href="interrupt_8c.html#a527d3b0da76a1ab45ccd89950cc891cd">PB1_triggered</a> = value;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#if DEBUG_DBPRINT == 1 </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="dbprint_8c.html#afbbbe6e04352a6b56d1d8a053ec4f941">dbcrit</a>(<span class="stringliteral">&quot;Non-existing button selected!&quot;</span>);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <a class="code" href="util_8h.html#ab212081592c908bf57b591e3c6e7483d">error</a>(19);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div><div class="ttc" id="interrupt_8c_html_a920e2adfdf9ac0189246152dabbb2929"><div class="ttname"><a href="interrupt_8c.html#a920e2adfdf9ac0189246152dabbb2929">PB0_triggered</a></div><div class="ttdeci">static volatile bool PB0_triggered</div><div class="ttdef"><b>Definition:</b> <a href="interrupt_8c_source.html#l00079">interrupt.c:79</a></div></div>
<div class="ttc" id="interrupt_8c_html_a527d3b0da76a1ab45ccd89950cc891cd"><div class="ttname"><a href="interrupt_8c.html#a527d3b0da76a1ab45ccd89950cc891cd">PB1_triggered</a></div><div class="ttdeci">static volatile bool PB1_triggered</div><div class="ttdef"><b>Definition:</b> <a href="interrupt_8c_source.html#l00080">interrupt.c:80</a></div></div>
<div class="ttc" id="util_8h_html_ab212081592c908bf57b591e3c6e7483d"><div class="ttname"><a href="util_8h.html#ab212081592c908bf57b591e3c6e7483d">error</a></div><div class="ttdeci">void error(uint8_t number)</div><div class="ttdoc">Error method. </div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00130">util.c:130</a></div></div>
<div class="ttc" id="dbprint_8c_html_afbbbe6e04352a6b56d1d8a053ec4f941"><div class="ttname"><a href="dbprint_8c.html#afbbbe6e04352a6b56d1d8a053ec4f941">dbcrit</a></div><div class="ttdeci">void dbcrit(char *message)</div><div class="ttdoc">Print a critical error string (char array) in red to USARTx and go to the next line. </div><div class="ttdef"><b>Definition:</b> <a href="dbprint_8c_source.html#l00537">dbprint.c:537</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a87d72653156b83829786f1f856ecbad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87d72653156b83829786f1f856ecbad1">&#9670;&nbsp;</a></span>GPIO_EVEN_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GPIO_EVEN_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GPIO Even IRQ for pushbuttons on even-numbered pins. </p>
<p>The RTC is also disabled on a button press (<em>manual wake-up</em>)</p>
<dl class="section note"><dt>Note</dt><dd>The <em>weak</em> definition for this method is located in <code>system_efm32hg.h</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00200">200</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">/* Read interrupt flags */</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    uint32_t flags = GPIO_IntGet();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">/* Check if PB1 is pushed */</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">if</span> (flags == 0x400)</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="comment">/* Disable the counter (manual wakeup) */</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        RTC_Enable(<span class="keyword">false</span>);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <a class="code" href="interrupt_8c.html#a527d3b0da76a1ab45ccd89950cc891cd">PB1_triggered</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">/* Clear all even pin interrupt flags */</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    GPIO_IntClear(0x5555);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div><div class="ttc" id="interrupt_8c_html_a527d3b0da76a1ab45ccd89950cc891cd"><div class="ttname"><a href="interrupt_8c.html#a527d3b0da76a1ab45ccd89950cc891cd">PB1_triggered</a></div><div class="ttdeci">static volatile bool PB1_triggered</div><div class="ttdef"><b>Definition:</b> <a href="interrupt_8c_source.html#l00080">interrupt.c:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8fff5a798ff4721659dc7bdbb3149c8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fff5a798ff4721659dc7bdbb3149c8b">&#9670;&nbsp;</a></span>GPIO_ODD_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GPIO_ODD_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GPIO Odd IRQ for pushbuttons on odd-numbered pins. </p>
<p>The RTC is also disabled on a button press (<em>manual wakeup</em>).</p>
<dl class="section note"><dt>Note</dt><dd>The <em>weak</em> definition for this method is located in <code>system_efm32hg.h</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00229">229</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;{</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">/* Read interrupt flags */</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    uint32_t flags = GPIO_IntGet();</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">/* Check if PB0 is pushed */</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">if</span> (flags == 0x200)</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="comment">/* Disable the counter (manual wake-up) */</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        RTC_Enable(<span class="keyword">false</span>);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="interrupt_8c.html#a920e2adfdf9ac0189246152dabbb2929">PB0_triggered</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">/* Check if INT1 is triggered */</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor">#if CUSTOM_BOARD == 1 </span><span class="comment">/* Custom Happy Gecko pinout */</span><span class="preprocessor"></span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">if</span> (flags == 0x8) <a class="code" href="ADXL362_8h.html#a4ec684aa4bd58a9a39b8a9187a41fd6a">ADXL_setTriggered</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* Regular Happy Gecko pinout */</span><span class="preprocessor"></span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">if</span> (flags == 0x80) <a class="code" href="ADXL362_8h.html#a4ec684aa4bd58a9a39b8a9187a41fd6a">ADXL_setTriggered</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* Board pinout selection */</span><span class="preprocessor"></span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">/* Clear all odd pin interrupt flags */</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    GPIO_IntClear(0xAAAA);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;}</div><div class="ttc" id="interrupt_8c_html_a920e2adfdf9ac0189246152dabbb2929"><div class="ttname"><a href="interrupt_8c.html#a920e2adfdf9ac0189246152dabbb2929">PB0_triggered</a></div><div class="ttdeci">static volatile bool PB0_triggered</div><div class="ttdef"><b>Definition:</b> <a href="interrupt_8c_source.html#l00079">interrupt.c:79</a></div></div>
<div class="ttc" id="ADXL362_8h_html_a4ec684aa4bd58a9a39b8a9187a41fd6a"><div class="ttname"><a href="ADXL362_8h.html#a4ec684aa4bd58a9a39b8a9187a41fd6a">ADXL_setTriggered</a></div><div class="ttdeci">void ADXL_setTriggered(bool triggered)</div><div class="ttdoc">Setter for the ADXL_triggered static variable. </div><div class="ttdef"><b>Definition:</b> <a href="ADXL362_8c_source.html#l00201">ADXL362.c:201</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e35708d61d26e9fe559a5545cdad810"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e35708d61d26e9fe559a5545cdad810">&#9670;&nbsp;</a></span>initGPIOwakeup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initGPIOwakeup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize GPIO wake-up functionality. </p>
<p>Initialize buttons <code>PB0</code> and <code>PB1</code> on falling-edge interrupts and <code>ADXL_INT1</code> on rising-edge interrupts. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00091">91</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">/* Enable necessary clocks (just in case) */</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    CMU_ClockEnable(cmuClock_HFPER, <span class="keyword">true</span>); <span class="comment">/* GPIO is a High Frequency Peripheral */</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    CMU_ClockEnable(cmuClock_GPIO, <span class="keyword">true</span>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">/* Configure PB0 and PB1 as input with glitch filter enabled, last argument sets pull direction */</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    GPIO_PinModeSet(<a class="code" href="pin__mapping_8h.html#ad891cd64538eea14b7d0a5af31dc9d54">PB0_PORT</a>, <a class="code" href="pin__mapping_8h.html#aea39132b18ce668ed815d13c3153323b">PB0_PIN</a>, gpioModeInputPullFilter, 1);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    GPIO_PinModeSet(<a class="code" href="pin__mapping_8h.html#a45dba1bc29795a6d20a5eab51e7932be">PB1_PORT</a>, <a class="code" href="pin__mapping_8h.html#aa33c970f051ff2f38a217f39f00599c1">PB1_PIN</a>, gpioModeInputPullFilter, 1);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">/* Configure ADXL_INT1 as input, the last argument enables the filter */</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    GPIO_PinModeSet(<a class="code" href="pin__mapping_8h.html#af29262dedd520950b373f56e12feaf62">ADXL_INT1_PORT</a>, <a class="code" href="pin__mapping_8h.html#a70ba0d40c82a05d88a91cfa3fb4caf9a">ADXL_INT1_PIN</a>, gpioModeInput, 1);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">/* Clear all odd pin interrupt flags (just in case)</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">     * NVIC_ClearPendingIRQ(GPIO_ODD_IRQn); would also work but is less &quot;readable&quot; */</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    GPIO_IntClear(0xAAAA);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">/* Clear all even pin interrupt flags (just in case)</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">     * NVIC_ClearPendingIRQ(GPIO_EVEN_IRQn); would also work but is less &quot;readable&quot; */</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    GPIO_IntClear(0x5555);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">/* All pending interrupts can be cleared with GPIO_IntClear(0xFFFF); */</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">/* Enable IRQ for even numbered GPIO pins */</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    NVIC_EnableIRQ(GPIO_EVEN_IRQn);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">/* Enable IRQ for odd numbered GPIO pins */</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    NVIC_EnableIRQ(GPIO_ODD_IRQn);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">/* Enable falling-edge interrupts for PB pins */</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    GPIO_ExtIntConfig(<a class="code" href="pin__mapping_8h.html#ad891cd64538eea14b7d0a5af31dc9d54">PB0_PORT</a>, <a class="code" href="pin__mapping_8h.html#aea39132b18ce668ed815d13c3153323b">PB0_PIN</a>, <a class="code" href="pin__mapping_8h.html#aea39132b18ce668ed815d13c3153323b">PB0_PIN</a>, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    GPIO_ExtIntConfig(<a class="code" href="pin__mapping_8h.html#a45dba1bc29795a6d20a5eab51e7932be">PB1_PORT</a>, <a class="code" href="pin__mapping_8h.html#aa33c970f051ff2f38a217f39f00599c1">PB1_PIN</a>, <a class="code" href="pin__mapping_8h.html#aa33c970f051ff2f38a217f39f00599c1">PB1_PIN</a>, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">/* Enable rising-edge interrupts for ADXL_INT1 */</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    GPIO_ExtIntConfig(<a class="code" href="pin__mapping_8h.html#af29262dedd520950b373f56e12feaf62">ADXL_INT1_PORT</a>, <a class="code" href="pin__mapping_8h.html#a70ba0d40c82a05d88a91cfa3fb4caf9a">ADXL_INT1_PIN</a>, <a class="code" href="pin__mapping_8h.html#a70ba0d40c82a05d88a91cfa3fb4caf9a">ADXL_INT1_PIN</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor">#if DEBUG_DBPRINT == 1 </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="dbprint_8c.html#acb5d4e1082c625ad85d835d4e053d4d8">dbinfo</a>(<span class="stringliteral">&quot;GPIO wake-up initialized&quot;</span>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG_DBPRINT */</span><span class="preprocessor"></span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div><div class="ttc" id="pin__mapping_8h_html_af29262dedd520950b373f56e12feaf62"><div class="ttname"><a href="pin__mapping_8h.html#af29262dedd520950b373f56e12feaf62">ADXL_INT1_PORT</a></div><div class="ttdeci">#define ADXL_INT1_PORT</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00077">pin_mapping.h:77</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_aea39132b18ce668ed815d13c3153323b"><div class="ttname"><a href="pin__mapping_8h.html#aea39132b18ce668ed815d13c3153323b">PB0_PIN</a></div><div class="ttdeci">#define PB0_PIN</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00090">pin_mapping.h:90</a></div></div>
<div class="ttc" id="dbprint_8c_html_acb5d4e1082c625ad85d835d4e053d4d8"><div class="ttname"><a href="dbprint_8c.html#acb5d4e1082c625ad85d835d4e053d4d8">dbinfo</a></div><div class="ttdeci">void dbinfo(char *message)</div><div class="ttdoc">Print an info string (char array) to USARTx and go to the next line. </div><div class="ttdef"><b>Definition:</b> <a href="dbprint_8c_source.html#l00501">dbprint.c:501</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_a45dba1bc29795a6d20a5eab51e7932be"><div class="ttname"><a href="pin__mapping_8h.html#a45dba1bc29795a6d20a5eab51e7932be">PB1_PORT</a></div><div class="ttdeci">#define PB1_PORT</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00091">pin_mapping.h:91</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_ad891cd64538eea14b7d0a5af31dc9d54"><div class="ttname"><a href="pin__mapping_8h.html#ad891cd64538eea14b7d0a5af31dc9d54">PB0_PORT</a></div><div class="ttdeci">#define PB0_PORT</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00089">pin_mapping.h:89</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_aa33c970f051ff2f38a217f39f00599c1"><div class="ttname"><a href="pin__mapping_8h.html#aa33c970f051ff2f38a217f39f00599c1">PB1_PIN</a></div><div class="ttdeci">#define PB1_PIN</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00092">pin_mapping.h:92</a></div></div>
<div class="ttc" id="pin__mapping_8h_html_a70ba0d40c82a05d88a91cfa3fb4caf9a"><div class="ttname"><a href="pin__mapping_8h.html#a70ba0d40c82a05d88a91cfa3fb4caf9a">ADXL_INT1_PIN</a></div><div class="ttdeci">#define ADXL_INT1_PIN</div><div class="ttdef"><b>Definition:</b> <a href="pin__mapping_8h_source.html#l00078">pin_mapping.h:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a920e2adfdf9ac0189246152dabbb2929"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a920e2adfdf9ac0189246152dabbb2929">&#9670;&nbsp;</a></span>PB0_triggered</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool PB0_triggered = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00079">79</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

</div>
</div>
<a id="a527d3b0da76a1ab45ccd89950cc891cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a527d3b0da76a1ab45ccd89950cc891cd">&#9670;&nbsp;</a></span>PB1_triggered</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool PB1_triggered = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00080">80</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_952e9747e32fbb216a31eb66ba91adc1.html">EFM32HG-Embedded2-project</a></li><li class="navelem"><a class="el" href="dir_4be578414597071060019317d61cdf19.html">src</a></li><li class="navelem"><a class="el" href="interrupt_8c.html">interrupt.c</a></li>
    <li class="footer">Generated on Tue Oct 1 2019 14:39:10 for Embedded System Design 2 - Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
